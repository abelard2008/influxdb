{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/react-virtualized-auto-sizer/dist/index.esm.js","../node_modules/d3-path/src/path.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/math.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/curve/basis.js","../node_modules/d3-shape/src/curve/monotone.js","../node_modules/d3-shape/src/curve/natural.js","../node_modules/d3-shape/src/curve/step.js","../src/constants/colorSchemes.ts","../src/constants/index.ts","../src/utils/clearCanvas.ts","../src/components/Axes.tsx","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/extent.js","../node_modules/d3-array/src/range.js","../node_modules/d3-array/src/ticks.js","../src/utils/tooltip.ts","../src/constants/columnKeys.ts","../src/utils/useMousePos.ts","../src/utils/useTooltipStyle.ts","../src/utils/useLayoutStyle.ts","../src/components/Tooltip.tsx","../src/utils/useTooltipElement.ts","../src/components/HistogramLayer.tsx","../src/utils/histogramTooltip.ts","../src/utils/isDefined.ts","../src/utils/drawLines.ts","../node_modules/d3-shape/src/line.js","../src/utils/simplify.ts","../src/components/LineHoverLayer.tsx","../src/utils/lineTooltip.ts","../src/utils/getLineHoverPoints.ts","../src/utils/drawLineHoverData.ts","../src/utils/flatMap.ts","../src/utils/extrema.ts","../src/utils/useHoverLineIndices.ts","../src/utils/useLazyMemo.ts","../src/components/LineLayer.tsx","../src/utils/lineData.ts","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-color/src/math.js","../node_modules/d3-color/src/lab.js","../node_modules/d3-color/src/cubehelix.js","../src/utils/drawHeatmap.ts","../src/components/HeatmapHoverLayer.tsx","../src/utils/heatmapTooltip.ts","../src/components/HeatmapLayer.tsx","../src/utils/drawShapes.ts","../src/components/ScatterLayer.tsx","../src/utils/brush.ts","../src/components/Brush.tsx","../node_modules/d3-scale/node_modules/d3-array/src/ascending.js","../node_modules/d3-scale/node_modules/d3-array/src/bisector.js","../node_modules/d3-scale/node_modules/d3-array/src/bisect.js","../node_modules/d3-scale/node_modules/d3-array/src/ticks.js","../node_modules/d3-scale/src/init.js","../node_modules/d3-collection/src/map.js","../node_modules/d3-collection/src/set.js","../node_modules/d3-scale/src/array.js","../node_modules/d3-scale/src/ordinal.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/basis.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-interpolate/src/transform/decompose.js","../node_modules/d3-interpolate/src/zoom.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-time-format/src/isoFormat.js","../node_modules/d3-time-format/src/isoParse.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/utcTime.js","../node_modules/d3-scale/src/nice.js","../node_modules/d3-scale/src/sequential.js","../src/utils/getFillScale.ts","../src/utils/getGroupKey.ts","../src/utils/appendGroupingCol.ts","../src/layerTransforms/line.ts","../src/utils/getSymbolScale.ts","../src/layerTransforms/scatter.ts","../src/utils/newTable.ts","../src/layerTransforms/heatmap.ts","../src/layerTransforms/histogram.ts","../node_modules/d3-array/src/threshold/sturges.js","../src/utils/getTimeFormatter.ts","../src/utils/getTicks.ts","../src/utils/assert.ts","../src/utils/getTextMetrics.ts","../src/utils/getMargins.ts","../src/utils/identityMerge.ts","../node_modules/memoize-one/dist/memoize-one.esm.js","../src/utils/MemoizedFunctionCache.ts","../src/utils/defaultNumberFormatter.ts","../src/utils/getLinearScale.ts","../src/utils/PlotEnv.ts","../src/utils/usePlotEnv.ts","../src/utils/useMountedEffect.ts","../src/components/SizedPlot.tsx","../src/utils/useForceUpdate.ts","../src/utils/useDragEvent.ts","../node_modules/d3-dsv/src/dsv.js","../node_modules/d3-dsv/src/csv.js","../src/utils/fromFlux.ts","../node_modules/d3-dsv/src/tsv.js","../src/components/Plot.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { createElement, PureComponent } from 'react';\n\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n **/\n\nfunction createDetectElementResize(nonce) {\n  // Check `document` and `window` in case of server-side rendering\n  var _window;\n  if (typeof window !== 'undefined') {\n    _window = window;\n  } else if (typeof self !== 'undefined') {\n    _window = self;\n  } else {\n    _window = global;\n  }\n\n  var attachEvent = typeof document !== 'undefined' && document.attachEvent;\n\n  if (!attachEvent) {\n    var requestFrame = function () {\n      var raf = _window.requestAnimationFrame || _window.mozRequestAnimationFrame || _window.webkitRequestAnimationFrame || function (fn) {\n        return _window.setTimeout(fn, 20);\n      };\n      return function (fn) {\n        return raf(fn);\n      };\n    }();\n\n    var cancelFrame = function () {\n      var cancel = _window.cancelAnimationFrame || _window.mozCancelAnimationFrame || _window.webkitCancelAnimationFrame || _window.clearTimeout;\n      return function (id) {\n        return cancel(id);\n      };\n    }();\n\n    var resetTriggers = function resetTriggers(element) {\n      var triggers = element.__resizeTriggers__,\n          expand = triggers.firstElementChild,\n          contract = triggers.lastElementChild,\n          expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + 'px';\n      expandChild.style.height = expand.offsetHeight + 1 + 'px';\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    var checkTriggers = function checkTriggers(element) {\n      return element.offsetWidth != element.__resizeLast__.width || element.offsetHeight != element.__resizeLast__.height;\n    };\n\n    var scrollListener = function scrollListener(e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className.indexOf('contract-trigger') < 0 && e.target.className.indexOf('expand-trigger') < 0) {\n        return;\n      }\n\n      var element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function () {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function (fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    var animation = false,\n        keyframeprefix = '',\n        animationstartevent = 'animationstart',\n        domPrefixes = 'Webkit Moz O ms'.split(' '),\n        startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' '),\n        pfx = '';\n    {\n      var elm = document.createElement('fakeelement');\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (var i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = '-' + pfx.toLowerCase() + '-';\n            animationstartevent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n\n    var animationName = 'resizeanim';\n    var animationKeyframes = '@' + keyframeprefix + 'keyframes ' + animationName + ' { from { opacity: 0; } to { opacity: 0; } } ';\n    var animationStyle = keyframeprefix + 'animation: 1ms ' + animationName + '; ';\n  }\n\n  var createStyles = function createStyles(doc) {\n    if (!doc.getElementById('detectElementResize')) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      var css = (animationKeyframes ? animationKeyframes : '') + '.resize-triggers { ' + (animationStyle ? animationStyle : '') + 'visibility: hidden; opacity: 0; } ' + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n          head = doc.head || doc.getElementsByTagName('head')[0],\n          style = doc.createElement('style');\n\n      style.id = 'detectElementResize';\n      style.type = 'text/css';\n\n      if (nonce != null) {\n        style.setAttribute('nonce', nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  var addResizeListener = function addResizeListener(element, fn) {\n    if (attachEvent) {\n      element.attachEvent('onresize', fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        var doc = element.ownerDocument;\n        var elementStyle = _window.getComputedStyle(element);\n        if (elementStyle && elementStyle.position == 'static') {\n          element.style.position = 'relative';\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement('div')).className = 'resize-triggers';\n        element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' + '<div class=\"contract-trigger\"></div>';\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener('scroll', scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationstartevent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName == animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  var removeResizeListener = function removeResizeListener(element, fn) {\n    if (attachEvent) {\n      element.detachEvent('onresize', fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener('scroll', scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener: addResizeListener,\n    removeResizeListener: removeResizeListener\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar AutoSizer = function (_React$PureComponent) {\n  inherits(AutoSizer, _React$PureComponent);\n\n  function AutoSizer() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, AutoSizer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = AutoSizer.__proto__ || Object.getPrototypeOf(AutoSizer)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      height: _this.props.defaultHeight || 0,\n      width: _this.props.defaultWidth || 0\n    }, _this._onResize = function () {\n      var _this$props = _this.props,\n          disableHeight = _this$props.disableHeight,\n          disableWidth = _this$props.disableWidth,\n          onResize = _this$props.onResize;\n\n\n      if (_this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        var _height = _this._parentNode.offsetHeight || 0;\n        var _width = _this._parentNode.offsetWidth || 0;\n\n        var _style = window.getComputedStyle(_this._parentNode) || {};\n        var paddingLeft = parseInt(_style.paddingLeft, 10) || 0;\n        var paddingRight = parseInt(_style.paddingRight, 10) || 0;\n        var paddingTop = parseInt(_style.paddingTop, 10) || 0;\n        var paddingBottom = parseInt(_style.paddingBottom, 10) || 0;\n\n        var newHeight = _height - paddingTop - paddingBottom;\n        var newWidth = _width - paddingLeft - paddingRight;\n\n        if (!disableHeight && _this.state.height !== newHeight || !disableWidth && _this.state.width !== newWidth) {\n          _this.setState({\n            height: _height - paddingTop - paddingBottom,\n            width: _width - paddingLeft - paddingRight\n          });\n\n          onResize({ height: _height, width: _width });\n        }\n      }\n    }, _this._setRef = function (autoSizer) {\n      _this._autoSizer = autoSizer;\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(AutoSizer, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var nonce = this.props.nonce;\n\n      if (this._autoSizer && this._autoSizer.parentNode && this._autoSizer.parentNode.ownerDocument && this._autoSizer.parentNode.ownerDocument.defaultView && this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement) {\n        // Delay access of parentNode until mount.\n        // This handles edge-cases where the component has already been unmounted before its ref has been set,\n        // As well as libraries like react-lite which have a slightly different lifecycle.\n        this._parentNode = this._autoSizer.parentNode;\n\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = createDetectElementResize(nonce);\n        this._detectElementResize.addResizeListener(this._parentNode, this._onResize);\n\n        this._onResize();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this._detectElementResize && this._parentNode) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          className = _props.className,\n          disableHeight = _props.disableHeight,\n          disableWidth = _props.disableWidth,\n          style = _props.style;\n      var _state = this.state,\n          height = _state.height,\n          width = _state.width;\n\n      // Outer div should not force width/height since that may prevent containers from shrinking.\n      // Inner component should overflow and use calculated width/height.\n      // See issue #68 for more information.\n\n      var outerStyle = { overflow: 'visible' };\n      var childParams = {};\n\n      // Avoid rendering children before the initial measurements have been collected.\n      // At best this would just be wasting cycles.\n      var bailoutOnChildren = false;\n\n      if (!disableHeight) {\n        if (height === 0) {\n          bailoutOnChildren = true;\n        }\n        outerStyle.height = 0;\n        childParams.height = height;\n      }\n\n      if (!disableWidth) {\n        if (width === 0) {\n          bailoutOnChildren = true;\n        }\n        outerStyle.width = 0;\n        childParams.width = width;\n      }\n\n      return createElement(\n        'div',\n        {\n          className: className,\n          ref: this._setRef,\n          style: _extends({}, outerStyle, style) },\n        !bailoutOnChildren && children(childParams)\n      );\n    }\n  }]);\n  return AutoSizer;\n}(PureComponent);\n\nAutoSizer.defaultProps = {\n  onResize: function onResize() {},\n  disableHeight: false,\n  disableWidth: false,\n  style: {}\n};\n\nexport default AutoSizer;\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export const VIRIDIS = [\n  '#440154',\n  '#481f70',\n  '#443983',\n  '#3b528b',\n  '#31688e',\n  '#287c8e',\n  '#21918c',\n  '#20a486',\n  '#35b779',\n  '#5ec962',\n  '#90d743',\n  '#c8e020',\n]\n\nexport const MAGMA = [\n  '#000004',\n  '#100b2d',\n  '#2c115f',\n  '#51127c',\n  '#721f81',\n  '#932b80',\n  '#b73779',\n  '#d8456c',\n  '#f1605d',\n  '#fc8961',\n  '#feb078',\n  '#fed799',\n]\n\nexport const INFERNO = [\n  '#000004',\n  '#110a30',\n  '#320a5e',\n  '#57106e',\n  '#781c6d',\n  '#9a2865',\n  '#bc3754',\n  '#d84c3e',\n  '#ed6925',\n  '#f98e09',\n  '#fbb61a',\n  '#f4df53',\n]\n\nexport const PLASMA = [\n  '#0d0887',\n  '#3a049a',\n  '#5c01a6',\n  '#7e03a8',\n  '#9c179e',\n  '#b52f8c',\n  '#cc4778',\n  '#de5f65',\n  '#ed7953',\n  '#f89540',\n  '#fdb42f',\n  '#fbd524',\n]\n\nexport const YL_OR_RD = [\n  '#ffffcc',\n  '#ffeda0',\n  '#fed976',\n  '#feb24c',\n  '#fd8d3c',\n  '#fc4e2a',\n  '#e31a1c',\n  '#bd0026',\n  '#800026',\n]\n\nexport const YL_GN_BU = [\n  '#ffffd9',\n  '#edf8b1',\n  '#c7e9b4',\n  '#7fcdbb',\n  '#41b6c4',\n  '#1d91c0',\n  '#225ea8',\n  '#253494',\n  '#081d58',\n]\n\nexport const BU_GN = [\n  '#f7fcfd',\n  '#ebf7fa',\n  '#dcf2f2',\n  '#c8eae4',\n  '#aadfd2',\n  '#88d1bc',\n  '#68c2a3',\n  '#4eb485',\n  '#37a266',\n  '#228c49',\n  '#0d7635',\n  '#025f27',\n]\n\n// Chronograf Colors\nexport const NINETEEN_EIGHTY_FOUR = ['#31C0F6', '#A500A5', '#FF7E27']\nexport const ATLANTIS = ['#74D495', '#3F3FBA', '#FF4D9E']\nexport const DO_ANDROIDS_DREAM = ['#8F8AF4', '#A51414', '#F4CF31']\nexport const DELOREAN = ['#FD7A5D', '#5F1CF2', '#4CE09A']\nexport const CTHULHU = ['#FDC44F', '#007C76', '#8983FF']\nexport const ECTOPLASM = ['#DA6FF1', '#00717A', '#ACFF76']\nexport const T_MAX_400_FILM = ['#F6F6F8', '#A4A8B6', '#545667']\n","import {\n  curveLinear,\n  curveMonotoneY,\n  curveMonotoneX,\n  curveBasis,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n  curveNatural,\n} from 'd3-shape'\n\nimport {Config, LayerConfig} from '../types'\nimport {NINETEEN_EIGHTY_FOUR as DEFAULT_COLOR_SCHEME} from './colorSchemes'\n\n// TODO: Make configurable\nexport const TICK_PADDING_RIGHT = 8\nexport const TICK_PADDING_TOP = 8\nexport const AXIS_LABEL_PADDING_BOTTOM = 15\nexport const DEFAULT_RANGE_PADDING = 0 // pixels\n\nexport const CURVES = {\n  linear: curveLinear,\n  monotoneX: curveMonotoneX,\n  monotoneY: curveMonotoneY,\n  cubic: curveBasis,\n  step: curveStep,\n  stepBefore: curveStepBefore,\n  stepAfter: curveStepAfter,\n  natural: curveNatural,\n}\n\nexport const CONFIG_DEFAULTS: Partial<Config> = {\n  layers: [],\n  valueFormatters: {},\n  xAxisLabel: '',\n  yAxisLabel: '',\n  showAxes: true,\n  axisColor: '#292933',\n  axisOpacity: 1,\n  gridColor: '#292933',\n  gridOpacity: 1,\n  tickFont: '10px sans-serif',\n  tickFontColor: '#8e91a1',\n  legendFont: '10px monospace',\n  legendFontColor: '#8e91a1',\n  legendFontBrightColor: '#c6cad3',\n  legendBackgroundColor: '#1c1c21',\n  legendBorder: '1px solid #202028',\n  legendCrosshairColor: '#31313d',\n}\n\nexport const LAYER_DEFAULTS: {[layerType: string]: Partial<LayerConfig>} = {\n  line: {\n    lineWidth: 1,\n    hoverDimension: 'auto',\n    fill: [],\n    colors: DEFAULT_COLOR_SCHEME,\n    interpolation: 'linear',\n    maxTooltipRows: 24,\n  },\n  heatmap: {\n    colors: DEFAULT_COLOR_SCHEME,\n    binSize: 10,\n  },\n  scatter: {\n    colors: DEFAULT_COLOR_SCHEME,\n    fill: [],\n    symbol: [],\n  },\n  histogram: {\n    fill: [],\n    colors: DEFAULT_COLOR_SCHEME,\n    position: 'stacked',\n    binCount: null,\n  },\n}\n","export const clearCanvas = (\n  canvas: HTMLCanvasElement,\n  width: number,\n  height: number\n) => {\n  const context = canvas.getContext('2d')\n  const dpRatio = window.devicePixelRatio || 1\n\n  // Configure canvas to draw on retina displays correctly\n  canvas.width = width * dpRatio\n  canvas.height = height * dpRatio\n  canvas.style.width = `${width}px`\n  canvas.style.height = `${height}px`\n  context.scale(dpRatio, dpRatio)\n\n  context.clearRect(0, 0, width, height)\n}\n","import * as React from 'react'\nimport {useRef, useLayoutEffect, FunctionComponent, CSSProperties} from 'react'\n\nimport {TICK_PADDING_RIGHT, TICK_PADDING_TOP} from '../constants'\nimport {clearCanvas} from '../utils/clearCanvas'\nimport {Margins, Scale, SizedConfig} from '../types'\n\nimport {PlotEnv} from '../utils/PlotEnv'\n\ninterface Props {\n  env: PlotEnv\n  style: CSSProperties\n}\n\n// A grid line must be at least this many pixels away from both parallel axes\n// in order to be drawn\nconst GRID_LINE_MIN_DIST = 5\n\ninterface DrawAxesOptions {\n  canvas: HTMLCanvasElement\n  innerWidth: number\n  innerHeight: number\n  margins: Margins\n  xTicks: number[]\n  yTicks: number[]\n  xTickFormatter: (tick: number) => string\n  yTickFormatter: (tick: number) => string\n  xScale: Scale<number, number>\n  yScale: Scale<number, number>\n  config: SizedConfig\n}\n\nexport const drawAxes = ({\n  canvas,\n  innerWidth,\n  innerHeight,\n  margins,\n  xTicks,\n  yTicks,\n  xTickFormatter,\n  yTickFormatter,\n  xScale,\n  yScale,\n  config: {\n    width,\n    height,\n    axisColor,\n    axisOpacity,\n    gridColor,\n    gridOpacity,\n    tickFont,\n    tickFontColor,\n    xAxisLabel,\n    yAxisLabel,\n  },\n}: DrawAxesOptions) => {\n  clearCanvas(canvas, width, height)\n\n  const context = canvas.getContext('2d')\n  const xAxisY = height - margins.bottom\n\n  // Draw and label each tick on the x axis\n\n  context.font = tickFont\n  context.textAlign = 'center'\n  context.textBaseline = 'top'\n\n  for (const xTick of xTicks) {\n    const x = xScale(xTick) + margins.left\n\n    if (\n      Math.abs(x - margins.left) > GRID_LINE_MIN_DIST &&\n      Math.abs(x - (width - margins.right)) > GRID_LINE_MIN_DIST\n    ) {\n      context.strokeStyle = gridColor\n      context.globalAlpha = gridOpacity\n      context.beginPath()\n      context.moveTo(x, xAxisY)\n      context.lineTo(x, margins.top)\n      context.stroke()\n    }\n\n    context.globalAlpha = 1\n    context.fillStyle = tickFontColor\n    context.fillText(xTickFormatter(xTick), x, xAxisY + TICK_PADDING_TOP)\n  }\n\n  // Draw and label each tick on the y axis\n\n  context.textAlign = 'end'\n  context.textBaseline = 'middle'\n\n  for (const yTick of yTicks) {\n    const y = yScale(yTick) + margins.top\n\n    if (\n      Math.abs(y - margins.top) > GRID_LINE_MIN_DIST &&\n      Math.abs(y - (height - margins.bottom)) > GRID_LINE_MIN_DIST\n    ) {\n      context.strokeStyle = gridColor\n      context.globalAlpha = gridOpacity\n      context.beginPath()\n      context.moveTo(margins.left, y)\n      context.lineTo(width - margins.right, y)\n      context.stroke()\n    }\n\n    context.globalAlpha = 1\n    context.fillStyle = tickFontColor\n    context.fillText(\n      yTickFormatter(yTick),\n      margins.left - TICK_PADDING_RIGHT,\n      y\n    )\n  }\n\n  // Draw x and y axis lines\n\n  context.globalAlpha = axisOpacity\n  context.strokeStyle = axisColor\n\n  context.beginPath()\n  context.moveTo(margins.left, xAxisY)\n  context.lineTo(width - margins.right, xAxisY)\n  context.stroke()\n\n  context.beginPath()\n  context.moveTo(margins.left, margins.top)\n  context.lineTo(width - margins.right, margins.top)\n  context.stroke()\n\n  context.beginPath()\n  context.moveTo(margins.left, xAxisY)\n  context.lineTo(margins.left, margins.top)\n  context.stroke()\n\n  context.beginPath()\n  context.moveTo(width - margins.right, xAxisY)\n  context.lineTo(width - margins.right, margins.top)\n  context.stroke()\n\n  context.globalAlpha = 1\n\n  // Draw the x axis label\n  if (xAxisLabel) {\n    context.textAlign = 'center'\n    context.textBaseline = 'bottom'\n    context.fillText(xAxisLabel, margins.left + innerWidth / 2, height)\n  }\n\n  // Draw the y axis label\n  if (yAxisLabel) {\n    const x = 0\n    const y = margins.top + innerHeight / 2\n\n    context.save()\n    context.translate(x, y)\n    context.rotate(-Math.PI / 2)\n    context.textAlign = 'center'\n    context.textBaseline = 'top'\n    context.fillText(yAxisLabel, 0, 0)\n    context.restore()\n  }\n}\n\nexport const Axes: FunctionComponent<Props> = ({env, style}) => {\n  const canvas = useRef<HTMLCanvasElement>(null)\n\n  const {\n    innerWidth,\n    innerHeight,\n    margins,\n    xTicks,\n    yTicks,\n    xTickFormatter,\n    yTickFormatter,\n    xScale,\n    yScale,\n    config,\n  } = env\n\n  useLayoutEffect(() => {\n    drawAxes({\n      canvas: canvas.current,\n      innerWidth,\n      innerHeight,\n      margins,\n      xTicks,\n      yTicks,\n      xTickFormatter,\n      yTickFormatter,\n      xScale,\n      yScale,\n      config,\n    })\n  }, [\n    canvas.current,\n    innerWidth,\n    innerHeight,\n    margins,\n    xTicks,\n    yTicks,\n    xTickFormatter,\n    yTickFormatter,\n    xScale,\n    yScale,\n    config,\n  ])\n\n  return <canvas className=\"vis-axes\" ref={canvas} style={style} />\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && value >= value) {\n        if (min === undefined) {\n          min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && value >= value) {\n        if (min === undefined) {\n          min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import {TooltipColumn, Table} from '../types'\n\nconst isVoid = (x: any) => x === null || x === undefined\n\nexport const getRangeLabel = (min: number, max: number, formatter): string => {\n  let label = ''\n\n  if (isVoid(min) || isVoid(max)) {\n    label = ''\n  } else if (min === max) {\n    label = formatter(min)\n  } else {\n    label = `${formatter(min)} – ${formatter(max)}`\n  }\n\n  return label\n}\n\nexport const getTooltipGroupColumns = (\n  table: Table,\n  rowIndices: number[],\n  groupColKeys: string[],\n  getValueFormatter: (colKey: string) => (x: any) => string,\n  rowColors: string[] | null\n): TooltipColumn[] =>\n  groupColKeys.map(key => {\n    const colData = table.getColumn(key)\n    const formatter = getValueFormatter(key)\n\n    return {\n      key,\n      name: table.getColumnName(key),\n      type: table.getColumnType(key),\n      colors: rowColors,\n      values: rowIndices.map(i => formatter(colData[i])),\n    }\n  })\n","// Computed column names in binned tables (heatmap, histogram)\nexport const X_MIN = 'xMin'\nexport const X_MAX = 'xMax'\nexport const Y_MIN = 'yMin'\nexport const Y_MAX = 'yMax'\nexport const COUNT = 'count'\n\n// Computed column names mapped to group aesthetics\nexport const FILL = '__fill'\nexport const SYMBOL = '__symbol'\n","import {useState, useEffect, useMemo, MouseEvent} from 'react'\n\nexport interface MousePosition {\n  x: number | null\n  y: number | null\n}\n\ninterface UseMousePosProps {\n  onMouseEnter: (e: MouseEvent<HTMLDivElement>) => void\n  onMouseMove: (e: MouseEvent<HTMLDivElement>) => void\n  onMouseLeave: (e: MouseEvent<HTMLDivElement>) => void\n}\n\nconst mousePositionFromEvent = (e: MouseEvent<HTMLDivElement>) => {\n  const {top, left} = e.currentTarget.getBoundingClientRect()\n\n  return {x: e.pageX - left, y: e.pageY - top}\n}\n\nexport const useMousePos = (): [MousePosition, UseMousePosProps] => {\n  const [state, setState] = useState<MousePosition>({x: null, y: null})\n\n  const eventProps = useMemo(\n    () => ({\n      onMouseEnter(e) {\n        setState(mousePositionFromEvent(e))\n      },\n      onMouseMove(e) {\n        setState(mousePositionFromEvent(e))\n      },\n      onMouseLeave() {\n        setState({x: null, y: null})\n      },\n    }),\n    []\n  )\n\n  return [state, eventProps]\n}\n\nexport const useRefMousePos = (el: Element): MousePosition => {\n  const [state, setState] = useState({x: null, y: null})\n\n  useEffect(() => {\n    if (!el) {\n      // Force one more render to give the ref a chance to attach\n      setState({x: null, y: null})\n\n      return\n    }\n\n    const onMouseEnter = e => {\n      const {left, top} = el.getBoundingClientRect()\n\n      setState({x: e.pageX - left, y: e.pageY - top})\n    }\n\n    const onMouseMove = e => {\n      onMouseEnter(e)\n    }\n\n    const onMouseLeave = () => {\n      setState({x: null, y: null})\n    }\n\n    el.addEventListener('mouseenter', onMouseEnter)\n    el.addEventListener('mousemove', onMouseMove)\n    el.addEventListener('mouseleave', onMouseLeave)\n\n    return () => {\n      el.removeEventListener('mouseenter', onMouseEnter)\n      el.removeEventListener('mousemove', onMouseMove)\n      el.removeEventListener('mouseleave', onMouseLeave)\n    }\n  }, [el])\n\n  return state\n}\n","import {useLayoutStyle} from './useLayoutStyle'\nimport {useRefMousePos} from './useMousePos'\n\nconst MARGIN_X = 30\n\nexport const useTooltipStyle = (el: HTMLDivElement) => {\n  const {x, y} = useRefMousePos(document.body)\n\n  // Position the tooltip next to the mouse cursor, like this:\n  //\n  //                   ┌─────────────┐\n  //                   │             │\n  //          (mouse)  │   tooltip   │\n  //                   │             │\n  //                   └─────────────┘\n  //\n  // The positioning is subject to the following restrictions:\n  //\n  // - If the tooltip overflows the right side of the screen, position it on\n  //   the left side of the cursor instead\n  //\n  // - If the tooltip overflows the top or bottom of the screen (with a bit of\n  //   margin), shift it just enough so that it is fully back inside the screen\n  //\n  useLayoutStyle(el, ({offsetWidth, offsetHeight}) => {\n    if (x === null || y === null) {\n      return {\n        display: 'none',\n      }\n    }\n\n    let dx = MARGIN_X\n    let dy = 0 - offsetHeight / 2\n\n    if (x + dx + offsetWidth > window.innerWidth) {\n      dx = 0 - MARGIN_X - offsetWidth\n    }\n\n    if (y + dy + offsetHeight > window.innerHeight) {\n      dy -= y + dy + offsetHeight - window.innerHeight\n    }\n\n    if (y + dy < 0) {\n      dy += 0 - (y + dy)\n    }\n\n    return {\n      display: 'inline',\n      position: 'fixed',\n      left: `${x + dx}px`,\n      top: `${y + dy}px`,\n    }\n  })\n}\n","import {useLayoutEffect, CSSProperties} from 'react'\n\nexport const useLayoutStyle = (\n  el: HTMLElement,\n  f: (el: HTMLElement) => CSSProperties\n) => {\n  useLayoutEffect(() => {\n    if (!el) {\n      return\n    }\n\n    const style = f(el)\n\n    for (const [k, v] of Object.entries(style)) {\n      el.style[k] = v\n    }\n  })\n}\n","import * as React from 'react'\nimport {FunctionComponent} from 'react'\nimport {createPortal} from 'react-dom'\n\nimport {TooltipData} from '../types'\nimport {useTooltipElement} from '../utils/useTooltipElement'\nimport {PlotEnv} from '../utils/PlotEnv'\n\ninterface Props {\n  data: TooltipData\n  env: PlotEnv\n}\n\nexport const Tooltip: FunctionComponent<Props> = ({data, env}) => {\n  const tooltipElement = useTooltipElement()\n\n  const {\n    config: {\n      legendFont: font,\n      legendFontColor: fontColor,\n      legendFontBrightColor: fontBrightColor,\n      legendBackgroundColor: backgroundColor,\n      legendBorder: border,\n      legendColumns: columnsWhitelist,\n    },\n  } = env\n\n  const columns = columnsWhitelist\n    ? data.filter(column => columnsWhitelist.includes(column.key))\n    : data\n\n  return createPortal(\n    <div\n      className=\"vis-tooltip\"\n      style={{\n        border,\n        font,\n        backgroundColor,\n        color: fontBrightColor,\n        borderRadius: '3px',\n        padding: '10px',\n        cursor: 'crosshair',\n      }}\n    >\n      <div\n        className=\"vis-tooltip-table\"\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n        }}\n      >\n        {columns.map(({name, type, values, colors}, i) => (\n          <div\n            key={name}\n            className=\"vis-tooltip-column\"\n            style={{\n              marginRight: i === data.length - 1 ? 0 : '15px',\n              textAlign: type === 'number' ? 'right' : 'left',\n            }}\n          >\n            <div\n              className=\"vis-tooltip-column-header\"\n              style={{marginBottom: '5px', color: fontColor}}\n            >\n              {name}\n            </div>\n            {values.map((value, i) => (\n              <div\n                className=\"vis-tooltip-column-value\"\n                key={i}\n                style={{\n                  color: colors && colors[i] ? colors[i] : fontBrightColor,\n                  maxWidth: '200px',\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis',\n                  whiteSpace: 'nowrap',\n                }}\n              >\n                {value}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>,\n    tooltipElement\n  )\n}\n","import {useRef, useEffect} from 'react'\n\nimport {useTooltipStyle} from '../utils/useTooltipStyle'\n\n/*\n  Returns a DOM node that a tooltip can be rendered inside.\n\n  The node will be created and appended to the end of the document body on\n  mount. After every render, the tooltip is automatically positioned to be next\n  to the mouse. It will be destroyed on unmount.  \n\n  The returned node is intended to be used with `React.createPortal`. It is\n  appended to the end of the document to circumvent z-index issues.\n*/\nexport const useTooltipElement = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  if (ref.current === null) {\n    ref.current = document.createElement('div')\n    ref.current.classList.add('vis-tooltip-container')\n\n    document.body.appendChild(ref.current)\n  }\n\n  useEffect(() => () => document.body.removeChild(ref.current), [])\n\n  useTooltipStyle(ref.current)\n\n  return ref.current\n}\n","import * as React from 'react'\nimport {useRef, useLayoutEffect, FunctionComponent} from 'react'\n\nimport {Table, HistogramLayerConfig, Scale} from '../types'\nimport {PlotEnv} from '../utils/PlotEnv'\nimport {clearCanvas} from '../utils/clearCanvas'\nimport {findHoveredRowIndices, getTooltipData} from '../utils/histogramTooltip'\nimport {Tooltip} from './Tooltip'\nimport {X_MIN, X_MAX, Y_MIN, Y_MAX, FILL} from '../constants/columnKeys'\n\nconst BAR_TRANSPARENCY = 0.5\nconst BAR_TRANSPARENCY_HOVER = 0.7\nconst BAR_PADDING = 1.5\n\ninterface DrawBarsOptions {\n  canvas: HTMLCanvasElement\n  table: Table\n  width: number\n  height: number\n  xScale: Scale<number, number>\n  yScale: Scale<number, number>\n  fillScale: Scale<string, string>\n  hoveredRowIndices: number[] | null\n}\n\nconst drawBars = ({\n  canvas,\n  table,\n  width,\n  height,\n  xScale,\n  yScale,\n  fillScale,\n  hoveredRowIndices,\n}: DrawBarsOptions): void => {\n  clearCanvas(canvas, width, height)\n\n  const xMinCol = table.getColumn(X_MIN, 'number')\n  const xMaxCol = table.getColumn(X_MAX, 'number')\n  const yMinCol = table.getColumn(Y_MIN, 'number')\n  const yMaxCol = table.getColumn(Y_MAX, 'number')\n  const groupKeyCol = table.getColumn(FILL, 'string')\n\n  const context = canvas.getContext('2d')\n\n  for (let i = 0; i < yMaxCol.length; i++) {\n    if (yMinCol[i] === yMaxCol[i]) {\n      // Skip 0-height bars\n      continue\n    }\n\n    const x = xScale(xMinCol[i])\n    const y = yScale(yMaxCol[i])\n    const width = xScale(xMaxCol[i]) - x - BAR_PADDING\n    const height = yScale(yMinCol[i]) - y - BAR_PADDING\n\n    const fill = fillScale(groupKeyCol[i])\n    const alpha =\n      hoveredRowIndices && hoveredRowIndices.includes(i)\n        ? BAR_TRANSPARENCY_HOVER\n        : BAR_TRANSPARENCY\n\n    // See https://stackoverflow.com/a/45125187\n    context.beginPath()\n    context.rect(x, y, width, height)\n    context.save()\n    context.clip()\n    context.lineWidth = 2\n    context.globalAlpha = alpha\n    context.fillStyle = fill\n    context.fill()\n    context.globalAlpha = 1\n    context.strokeStyle = fill\n    context.stroke()\n    context.restore()\n  }\n}\n\ninterface Props {\n  layerIndex: number\n  env: PlotEnv\n  hoverX: number | null\n  hoverY: number | null\n}\n\nexport const HistogramLayer: FunctionComponent<Props> = ({\n  layerIndex,\n  env,\n  hoverX,\n  hoverY,\n}) => {\n  const canvas = useRef<HTMLCanvasElement>(null)\n  const table = env.getTable(layerIndex)\n  const fillScale = env.getScale(layerIndex, 'fill')\n\n  const {x: xColKey, fill: fillColKeys} = env.config.layers[\n    layerIndex\n  ] as HistogramLayerConfig\n\n  const {xScale, yScale, innerWidth, innerHeight} = env\n\n  useLayoutEffect(() => {\n    drawBars({\n      table,\n      fillScale,\n      canvas: canvas.current,\n      width: innerWidth,\n      height: innerHeight,\n      xScale,\n      yScale,\n      hoveredRowIndices,\n    })\n  })\n\n  const hoveredRowIndices = findHoveredRowIndices(\n    table,\n    hoverX,\n    hoverY,\n    xScale,\n    yScale\n  )\n\n  const tooltipData = getTooltipData(\n    hoveredRowIndices,\n    table,\n    xColKey,\n    fillColKeys,\n    env.getFormatterForColumn,\n    fillScale\n  )\n\n  return (\n    <>\n      <canvas className=\"vis-layer histogram\" ref={canvas} />\n      {tooltipData && <Tooltip data={tooltipData} env={env} />}\n    </>\n  )\n}\n","import {range} from 'd3-array'\n\nimport {Table, TooltipData, Scale, ColumnType} from '../types'\nimport {getRangeLabel} from './tooltip'\nimport {getTooltipGroupColumns} from './tooltip'\nimport {X_MIN, X_MAX, Y_MAX, COUNT, FILL} from '../constants/columnKeys'\n\nexport const findHoveredRowIndices = (\n  table: Table,\n  hoverX: number,\n  hoverY: number,\n  xScale: Scale,\n  yScale: Scale\n) => {\n  if (!hoverX || !hoverY) {\n    return null\n  }\n\n  const xMinData = table.getColumn(X_MIN, 'number')\n  const xMaxData = table.getColumn(X_MAX, 'number')\n  const yMaxData = table.getColumn(Y_MAX, 'number')\n  const dataX = xScale.invert(hoverX)\n  const dataY = yScale.invert(hoverY)\n\n  // Find all bins whose x extent contain the mouse x position\n  const hoveredRowIndices = range(0, xMinData.length).filter(\n    i => xMinData[i] <= dataX && xMaxData[i] > dataX\n  )\n\n  // If the mouse y position is above every one of those bars, then the mouse\n  // isn't hovering over them\n  if (!hoveredRowIndices.some(i => yMaxData[i] >= dataY)) {\n    return null\n  }\n\n  return hoveredRowIndices\n}\n\nexport const getTooltipData = (\n  hoveredRowIndices: number[],\n  table: Table,\n  xColKey: string,\n  fillColKeys: string[],\n  getValueFormatter: (colKey: string) => (x: any) => string,\n  fillScale: Scale<string, string>\n): TooltipData => {\n  if (!hoveredRowIndices || hoveredRowIndices.length === 0) {\n    return null\n  }\n\n  const xMinData = table.getColumn(X_MIN, 'number')\n  const xMaxData = table.getColumn(X_MAX, 'number')\n  const countData = table.getColumn(COUNT, 'number')\n  const groupCol = table.getColumn(FILL, 'string')\n  const colors = hoveredRowIndices.map(i => fillScale(groupCol[i]))\n  const xFormatter = getValueFormatter(xColKey)\n  const countFormatter = getValueFormatter('yMin')\n\n  const xColumn = {\n    key: xColKey,\n    name: xColKey,\n    type: 'number' as ColumnType,\n    colors,\n    values: hoveredRowIndices.map(i =>\n      getRangeLabel(xMinData[i], xMaxData[i], xFormatter)\n    ),\n  }\n\n  const countColumn = {\n    key: 'count',\n    name: 'count',\n    type: 'number' as ColumnType,\n    colors,\n    values: hoveredRowIndices.map(i => countFormatter(countData[i])),\n  }\n\n  const fillColumns = getTooltipGroupColumns(\n    table,\n    hoveredRowIndices,\n    fillColKeys,\n    getValueFormatter,\n    colors\n  )\n\n  return [xColumn, countColumn, ...fillColumns]\n}\n","export const isDefined = (x: any) => x !== null && x !== undefined && !isNaN(x)\n","import {line, curveLinear} from 'd3-shape'\nimport {range} from 'd3-array'\n\nimport {LineInterpolation} from '../types'\nimport {LineData} from './lineData'\nimport {CURVES} from '../constants'\nimport {isDefined} from '../utils/isDefined'\n\ninterface DrawLinesOptions {\n  canvas: HTMLCanvasElement\n  interpolation: LineInterpolation\n  lineData: LineData\n  lineWidth?: number\n}\n\nexport const drawLines = ({\n  canvas,\n  lineData,\n  interpolation,\n  lineWidth = 1,\n}: DrawLinesOptions): void => {\n  const context = canvas.getContext('2d')\n\n  context.lineWidth = lineWidth\n\n  for (const {xs, ys, fill} of Object.values(lineData)) {\n    const lineGenerator: any = line()\n      .context(context)\n      .x((i: any) => xs[i])\n      .y((i: any) => ys[i])\n      .defined((i: any) => isDefined(xs[i]) && isDefined(ys[i]))\n      .curve(CURVES[interpolation] || curveLinear)\n\n    context.strokeStyle = fill\n    context.beginPath()\n    lineGenerator(range(0, xs.length))\n    context.stroke()\n  }\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant\";\nimport curveLinear from \"./curve/linear\";\nimport {x as pointX, y as pointY} from \"./point\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","type ArrayLike = number[] | Float64Array\n\nconst sqDist = (x0: number, y0: number, x1: number, y1: number) => {\n  return (y1 - y0) ** 2 + (x1 - x0) ** 2\n}\n\nconst simplifyDist = (xs: ArrayLike, ys: ArrayLike, epsilon: number) => {\n  const epsilonSq = epsilon ** 2\n  const keep = new Uint8Array(xs.length)\n\n  let prevX = xs[0]\n  let prevY = ys[0]\n  let keptLength = 1\n\n  keep[0] = 1\n  keep[keep.length - 1] = 1\n\n  for (let i = 1; i < xs.length; i++) {\n    const x = xs[i]\n    const y = ys[i]\n\n    if (sqDist(x, y, prevX, prevY) > epsilonSq) {\n      keep[i] = 1\n      prevX = x\n      prevY = y\n      keptLength++\n    }\n  }\n\n  const simplifiedXs = new Float64Array(keptLength)\n  const simplifiedYs = new Float64Array(keptLength)\n\n  let i = 0\n\n  for (let j = 0; j < keep.length; j++) {\n    if (keep[j] === 1) {\n      simplifiedXs[i] = xs[j]\n      simplifiedYs[i] = ys[j]\n      i++\n    }\n  }\n\n  return [simplifiedXs, simplifiedYs]\n}\n\n// Shortest distance from (x2, y2) to the line segment between (x0, y0) and (x1, y1)\n//\n// Adapted from the [Simplify.js](https://mourner.github.io/simplify-js/) library.\nconst sqSegmentDist = (\n  x0: number,\n  y0: number,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number\n) => {\n  let x = x0\n  let y = y0\n  let dx = x1 - x0\n  let dy = y1 - y0\n\n  if (dx !== 0 || dy !== 0) {\n    var t = ((x2 - x) * dx + (y2 - y) * dy) / (dx * dx + dy * dy)\n\n    if (t > 1) {\n      x = x1\n      y = y1\n    } else if (t > 0) {\n      x += dx * t\n      y += dy * t\n    }\n  }\n\n  dx = x2 - x\n  dy = y2 - y\n\n  return dx * dx + dy * dy\n}\n\nconst simplifyDouglasPeuckerHelper = (\n  xs: ArrayLike,\n  ys: ArrayLike,\n  epsilonSq: number,\n  i0: number,\n  i1: number,\n  keep: Uint8Array\n) => {\n  const x0 = xs[i0]\n  const y0 = ys[i0]\n  const x1 = xs[i1]\n  const y1 = ys[i1]\n\n  let maxIndex = 0\n  let maxDist = -1\n\n  for (let i = i0 + 1; i < i1; i++) {\n    const sqDist = sqSegmentDist(x0, y0, x1, y1, xs[i], ys[i])\n\n    if (sqDist > maxDist) {\n      maxIndex = i\n      maxDist = sqDist\n    }\n  }\n\n  if (maxDist > epsilonSq) {\n    keep[maxIndex] = 1\n\n    if (maxIndex - i0 > 1) {\n      simplifyDouglasPeuckerHelper(xs, ys, epsilonSq, i0, maxIndex, keep)\n    }\n\n    if (i1 - maxIndex > 1) {\n      simplifyDouglasPeuckerHelper(xs, ys, epsilonSq, maxIndex, i1, keep)\n    }\n  }\n}\n\nconst simplifyDouglasPeucker = (\n  xs: ArrayLike,\n  ys: ArrayLike,\n  epsilon: number\n) => {\n  const keep = new Uint8Array(xs.length)\n  const sqEpsilon = epsilon * epsilon\n\n  keep[0] = 1\n  keep[keep.length - 1] = 1\n\n  simplifyDouglasPeuckerHelper(xs, ys, sqEpsilon, 0, keep.length - 1, keep)\n\n  let resultLength = 0\n\n  for (let j = 0; j < keep.length; j++) {\n    if (keep[j] === 1) {\n      resultLength++\n    }\n  }\n\n  const xsResult = new Float64Array(resultLength)\n  const ysResult = new Float64Array(resultLength)\n\n  let i = 0\n\n  for (let j = 0; j < keep.length; j++) {\n    if (keep[j] === 1) {\n      xsResult[i] = xs[j]\n      ysResult[i] = ys[j]\n      i++\n    }\n  }\n\n  return [xsResult, ysResult]\n}\n\nexport const simplify = (xs: ArrayLike, ys: ArrayLike, epsilon: number) => {\n  const [_xs, _ys] = simplifyDist(xs, ys, epsilon)\n  const [__xs, __ys] = simplifyDouglasPeucker(_xs, _ys, epsilon)\n\n  return [__xs, __ys]\n}\n","import * as React from 'react'\nimport {useRef, useLayoutEffect, FunctionComponent} from 'react'\n\nimport {Tooltip} from './Tooltip'\nimport {FILL} from '../constants/columnKeys'\nimport {LineLayerConfig, LineHoverDimension} from '../types'\nimport {PlotEnv} from '../utils/PlotEnv'\nimport {LineData} from '../utils/lineData'\nimport {getTooltipData} from '../utils/lineTooltip'\nimport {getLineHoverPoints} from '../utils/getLineHoverPoints'\nimport {drawLines} from '../utils/drawLines'\nimport {drawLineHoverData} from '../utils/drawLineHoverData'\nimport {clearCanvas} from '../utils/clearCanvas'\n\ninterface Props {\n  env: PlotEnv\n  layerIndex: number\n  lineData: LineData\n  rowIndices: number[] | null\n  dimension: LineHoverDimension\n}\n\nexport const LineHoverLayer: FunctionComponent<Props> = ({\n  env,\n  layerIndex,\n  lineData,\n  rowIndices,\n  dimension,\n}) => {\n  const table = env.getTable(layerIndex)\n  const fillScale = env.getScale(layerIndex, 'fill')\n  const layer = env.config.layers[layerIndex] as LineLayerConfig\n  const {\n    interpolation,\n    x: xColKey,\n    y: yColKey,\n    fill: fillColKeys,\n    lineWidth,\n  } = layer\n\n  const {\n    xScale,\n    yScale,\n    innerWidth: width,\n    innerHeight: height,\n    config: {legendCrosshairColor: crosshairColor},\n  } = env\n\n  const xColData = table.getColumn(xColKey, 'number')\n  const yColData = table.getColumn(yColKey, 'number')\n  const groupColData = table.getColumn(FILL, 'string')\n\n  const tooltipData = getTooltipData(\n    rowIndices,\n    table,\n    xColKey,\n    yColKey,\n    FILL,\n    env.getFormatterForColumn,\n    fillColKeys,\n    fillScale\n  )\n\n  // TODO: Pass cols directly\n  const points = getLineHoverPoints(\n    table,\n    rowIndices,\n    xColKey,\n    yColKey,\n    xScale,\n    yScale,\n    fillScale\n  )\n\n  let crosshairX =\n    dimension === 'xy' || dimension === 'x'\n      ? xScale(xColData[rowIndices[0]])\n      : null\n\n  let crosshairY =\n    dimension === 'xy' || dimension === 'y'\n      ? yScale(yColData[rowIndices[0]])\n      : null\n\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n\n  useLayoutEffect(() => {\n    const canvas = canvasRef.current\n\n    clearCanvas(canvas, width, height)\n\n    if (dimension === 'xy') {\n      const groupKey = groupColData[rowIndices[0]]\n      const lineDatum = lineData[groupKey]\n\n      // Highlight the line that the single hovered point belongs to\n      drawLines({\n        canvas,\n        lineData: {[groupKey]: lineDatum},\n        interpolation,\n        lineWidth: lineWidth * 2,\n      })\n    }\n\n    drawLineHoverData({\n      canvas,\n      width,\n      height,\n      crosshairX,\n      crosshairY,\n      crosshairColor,\n      points,\n      radius: lineWidth * 2,\n    })\n  })\n\n  return (\n    <>\n      <canvas\n        className=\"vis-layer line-interactions\"\n        ref={canvasRef}\n        style={{position: 'absolute'}}\n      />\n      <Tooltip data={tooltipData} env={env} />\n    </>\n  )\n}\n","import {getTooltipGroupColumns} from './tooltip'\nimport {TooltipData, Table, Scale} from '../types'\n\nexport const getTooltipData = (\n  hoveredRowIndices: number[],\n  table: Table,\n  xColKey: string,\n  yColKey: string,\n  groupColKey: string,\n  getValueFormatter: (colKey: string) => (x: any) => string,\n  fillColKeys: string[],\n  fillScale: Scale<string, string>\n): TooltipData => {\n  const xColData = table.getColumn(xColKey, 'number')\n  const yColData = table.getColumn(yColKey, 'number')\n  const groupColData = table.getColumn(groupColKey, 'string')\n  const colors = hoveredRowIndices.map(i => fillScale(groupColData[i]))\n  const xFormatter = getValueFormatter(xColKey)\n  const yFormatter = getValueFormatter(yColKey)\n\n  const tooltipXCol = {\n    key: xColKey,\n    name: table.getColumnName(xColKey),\n    type: table.getColumnType(xColKey),\n    colors,\n    values: hoveredRowIndices.map(i => xFormatter(xColData[i])),\n  }\n\n  const tooltipYCol = {\n    key: yColKey,\n    name: table.getColumnName(yColKey),\n    type: table.getColumnType(yColKey),\n    colors,\n    values: hoveredRowIndices.map(i => yFormatter(yColData[i])),\n  }\n\n  const fillColumns = getTooltipGroupColumns(\n    table,\n    hoveredRowIndices,\n    fillColKeys,\n    getValueFormatter,\n    colors\n  )\n\n  return [tooltipXCol, tooltipYCol, ...fillColumns]\n}\n","import {Table, Scale} from '../types'\n\nimport {FILL} from '../constants/columnKeys'\n\nexport const getLineHoverPoints = (\n  table: Table,\n  hoverRowIndices: number[],\n  xColKey: string,\n  yColKey: string,\n  xScale: Scale<number, number>,\n  yScale: Scale<number, number>,\n  fillScale: Scale<string, string>\n): Array<{x: number; y: number; fill: string}> => {\n  const xColData = table.getColumn(xColKey, 'number')\n  const yColData = table.getColumn(yColKey, 'number')\n  const groupColData = table.getColumn(FILL, 'string')\n\n  return hoverRowIndices.map(i => ({\n    x: xScale(xColData[i]),\n    y: yScale(yColData[i]),\n    fill: fillScale(groupColData[i]),\n  }))\n}\n","interface DrawLinePointOptions {\n  canvas: HTMLCanvasElement\n  width: number\n  height: number\n  crosshairX: number | null\n  crosshairY: number | null\n  crosshairColor: string\n  points: Array<{x: number; y: number; fill: string}> | null\n  radius: number\n}\n\nexport const drawLineHoverData = ({\n  canvas,\n  width,\n  height,\n  crosshairX,\n  crosshairY,\n  crosshairColor,\n  points,\n  radius,\n}: DrawLinePointOptions): void => {\n  const context = canvas.getContext('2d')\n\n  context.strokeStyle = crosshairColor\n\n  if (crosshairX !== null) {\n    context.lineWidth = 1\n    context.beginPath()\n    context.moveTo(crosshairX, 0)\n    context.lineTo(crosshairX, height)\n    context.stroke()\n  }\n\n  if (crosshairY !== null) {\n    context.lineWidth = 1\n    context.beginPath()\n    context.moveTo(0, crosshairY)\n    context.lineTo(width, crosshairY)\n    context.stroke()\n  }\n\n  if (points !== null) {\n    for (const {x, y, fill} of points) {\n      context.beginPath()\n      context.arc(x, y, radius, 0, 2 * Math.PI)\n      context.fillStyle = fill\n      context.fill()\n    }\n  }\n}\n","/*\n  Equivalent to `flatten(xs.map(f))`.\n*/\nexport const flatMap = <X, Y>(\n  f: (x: X, i: number, xs: X[]) => Y[],\n  xs: X[]\n): Y[] => {\n  const result = []\n  const yss = xs.map(f)\n\n  for (const ys of yss) {\n    for (const y of ys) {\n      result.push(y)\n    }\n  }\n\n  return result\n}\n","import {extent} from 'd3-array'\n\nimport {flatMap} from './flatMap'\n\nexport const minBy = <T>(f: (x: T) => number, xs: T[]): T => {\n  let minX = null\n  let minDistance = Infinity\n\n  for (const x of xs) {\n    const distance = f(x)\n\n    if (distance < minDistance) {\n      minX = x\n      minDistance = distance\n    }\n  }\n\n  return minX\n}\n\nexport const maxBy = <T>(f: (x: T) => number, xs: T[]): T => {\n  let maxX = null\n  let maxDistance = -Infinity\n\n  for (const x of xs) {\n    const distance = f(x)\n\n    if (distance > maxDistance) {\n      maxX = x\n      maxDistance = distance\n    }\n  }\n\n  return maxX\n}\n\n/*\n  Given a list of lists, return the minimum and maximum value across all items\n  in all lists as a tuple.\n\n  Returns `null` if unsuccessful (e.g. if passed empty lists).\n*/\nexport const extentOfExtents = (\n  ...data: number[][]\n): [number, number] | null => {\n  const result = extent(flatMap(d => extent(d), data))\n\n  if (result.some(x => x === undefined)) {\n    return null\n  }\n\n  return result\n}\n","import {range} from 'd3-array'\n\nimport {Scale, NumericColumnData} from '../types'\nimport {useLazyMemo} from './useLazyMemo'\nimport {isDefined} from './isDefined'\nimport {minBy} from './extrema'\n\nexport const useHoverLineIndices = (\n  mode: 'x' | 'y' | 'xy',\n  mouseX: number,\n  mouseY: number,\n  xColData: NumericColumnData,\n  yColData: NumericColumnData,\n  groupColData: string[],\n  xScale: Scale<number, number>,\n  yScale: Scale<number, number>,\n  width: number,\n  height: number\n): number[] => {\n  const isActive =\n    mouseX !== undefined && mouseX !== null && mouseX >= 0 && mouseX < width\n\n  const index = useLazyMemo(\n    () => buildIndex(xColData, yColData, xScale, yScale, width, height),\n    [xColData, yColData, xScale, yScale, width, height],\n    isActive\n  )\n\n  if (!isActive) {\n    return null\n  }\n\n  let hoverLineIndices\n\n  if (mode === 'x') {\n    hoverLineIndices = lookupIndex1D(\n      index.xBins,\n      mouseX,\n      xScale.invert(mouseX),\n      xColData,\n      groupColData,\n      width\n    )\n  } else if (mode === 'y') {\n    hoverLineIndices = lookupIndex1D(\n      index.yBins,\n      mouseY,\n      yScale.invert(mouseY),\n      yColData,\n      groupColData,\n      height\n    )\n  } else {\n    hoverLineIndices = lookupIndex2D(\n      index.xyBins,\n      mouseX,\n      mouseY,\n      xScale.invert(mouseX),\n      yScale.invert(mouseY),\n      xColData,\n      yColData,\n      width,\n      height\n    )\n  }\n\n  return hoverLineIndices\n}\n\nconst INDEX_BIN_WIDTH = 30\n\ntype IndexTable = {\n  xBins: number[][]\n  yBins: number[][]\n  xyBins: number[][][] // :-]\n}\n\n/*\n  When a user hovers over a line graph, we need to show the points on each line\n  closest to the mouse position. Since we don't want to look through the entire\n  table to find the closest points on every hover event, we build an index on\n  the first hover event that makes subsequent lookups fast.\n\n  The index works by dividing the graph into discrete bins, each of them with a\n  side length of `INDEX_BIN_WIDTH` pixels. In each bin we store the indices of\n  rows in the original user-supplied table whose corresponding point lies\n  within that bin.\n  \n  Then on every hover event, we can use some quick math to decide which bin the\n  current hover corresponds to. Then we perform a linear search within each bin\n  to find the point on each line closest to the mouse position.  This limits\n  the amount of work we have to do, since we only need to scan through a single\n  bin, rather than through the entire table.\n\n  See `lookupIndex2D` and `lookupIndex1D` for more info.\n*/\nconst buildIndex = (\n  xColData: NumericColumnData,\n  yColData: NumericColumnData,\n  xScale: Scale<number, number>,\n  yScale: Scale<number, number>,\n  width: number,\n  height: number\n): IndexTable => {\n  const xBinCount = Math.ceil(width / INDEX_BIN_WIDTH)\n  const yBinCount = Math.ceil(height / INDEX_BIN_WIDTH)\n\n  const indexTable = {\n    xBins: range(xBinCount).map(_ => []),\n    yBins: range(yBinCount).map(_ => []),\n    xyBins: range(xBinCount).map(_ => range(yBinCount).map(_ => [])),\n  }\n\n  for (let i = 0; i < xColData.length; i++) {\n    const x = xScale(xColData[i])\n    const y = yScale(yColData[i])\n\n    if (!isDefined(x) || !isDefined(y)) {\n      continue\n    }\n\n    const xBinIndex = getBinIndex(x, width)\n    const yBinIndex = getBinIndex(y, height)\n\n    if (\n      xBinIndex < 0 ||\n      xBinIndex >= xBinCount ||\n      yBinIndex < 0 ||\n      yBinIndex >= yBinCount\n    ) {\n      continue\n    }\n\n    indexTable.xBins[xBinIndex].push(i)\n    indexTable.yBins[yBinIndex].push(i)\n    indexTable.xyBins[xBinIndex][yBinIndex].push(i)\n  }\n\n  return indexTable\n}\n\nconst getBinIndex = (x: number, length: number): number => {\n  const binCount = Math.ceil(length / INDEX_BIN_WIDTH)\n  const binIndex = Math.floor((x / length) * binCount)\n\n  return binIndex\n}\n\n/* \n  This function finds the single point in a line plot closest to an (x, y)\n  position using a precomputed `IndexTable`.\n  \n  The `IndexTable` partitions the plot into a discrete collection of\n  rectangles called \"bins\".\n  \n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n  \n  Each bin stores references to the points contained within the bin in the\n  visualization. Each point reference is the index of a row in the original\n  user-supplied table that contains the data of the point.\n  \n  When the user hovers over the plot, we can lookup the bin corresponding to\n  the (x, y) position of their mouse in constant time. In the following\n  picture, that bin is marked with an `x`:\n  \n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | |x| | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n  \n  We search through points in that bin to find the point closet to the exact\n  (x, y) position of the mouse. If we find such a point, we return it\n  immediately (as an index reference). However, there may be no points in the\n  bin, in which case we need to expand our selection to nearby bins. We do so\n  by searching the bins that border the initial bin:\n  \n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n      | | | | | | | | |x|x|x| | | |\n      -----------------------------\n      | | | | | | | | |x| |x| | | |\n      -----------------------------\n      | | | | | | | | |x|x|x| | | |\n      -----------------------------\n      | | | | | | | | | | | | | | |\n      -----------------------------\n  \n  If we still don't find a point, we expand the search again:\n  \n      -----------------------------\n      | | | | | | | |x|x|x|x|x| | |\n      -----------------------------\n      | | | | | | | |x| | | |x| | |\n      -----------------------------\n      | | | | | | | |x| | | |x| | |\n      -----------------------------\n      | | | | | | | |x| | | |x| | |\n      -----------------------------\n      | | | | | | | |x|x|x|x|x| | |\n      -----------------------------\n  \n  Expansion will stop at the bins that border the plot. So the next iteration\n  would only expand horizontally, but not vertically:\n  \n      -----------------------------\n      | | | | | | |x|x|x|x|x|x|x| |\n      -----------------------------\n      | | | | | | |x| | | | | |x| |\n      -----------------------------\n      | | | | | | |x| | | | | |x| |\n      -----------------------------\n      | | | | | | |x| | | | | |x| |\n      -----------------------------\n      | | | | | | |x|x|x|x|x|x|x| |\n      -----------------------------\n\n  When there is no where left to expand, we stop the search. \n*/\n\nconst lookupIndex2D = (\n  bins: number[][][],\n  mouseX: number,\n  mouseY: number,\n  dataX: number,\n  dataY: number,\n  xColData: NumericColumnData,\n  yColData: NumericColumnData,\n  width: number,\n  height: number\n): number[] => {\n  const xBinCount = bins.length\n  const yBinCount = bins[0].length\n\n  let i0 = Math.max(0, getBinIndex(mouseX, width))\n  let i1 = Math.min(xBinCount - 1, getBinIndex(mouseX, width))\n  let j0 = Math.max(0, getBinIndex(mouseY, height))\n  let j1 = Math.min(yBinCount - 1, getBinIndex(mouseY, height))\n\n  let closestRowIndices = bins[i0][j0]\n  let hasSearchedEverything =\n    i0 === 0 && i1 === xBinCount - 1 && j0 === 0 && j1 === yBinCount - 1\n\n  while (closestRowIndices.length === 0 && !hasSearchedEverything) {\n    i0 = Math.max(0, i0 - 1)\n    i1 = Math.min(xBinCount - 1, i1 + 1)\n    j0 = Math.max(0, j0 - 1)\n    j1 = Math.min(yBinCount - 1, j1 + 1)\n\n    closestRowIndices = collectClosestRowIndices(i0, i1, j0, j1, bins)\n\n    hasSearchedEverything =\n      i0 === 0 && i1 === xBinCount - 1 && j0 === 0 && j1 === yBinCount - 1\n  }\n\n  if (closestRowIndices.length === 0) {\n    return []\n  }\n\n  const nearestIndex = minBy(\n    rowIndex => sqDist(dataX, dataY, xColData[rowIndex], yColData[rowIndex]),\n    closestRowIndices\n  )\n\n  return [nearestIndex]\n}\n\nconst collectClosestRowIndices = (i0, i1, j0, j1, bins): number[] => {\n  let closestRowIndices = []\n\n  let x = i0\n  let y = j0\n\n  while (x <= i1) {\n    closestRowIndices.push(...bins[x][y])\n    x++\n  }\n\n  x--\n  y++\n\n  while (y <= j1) {\n    closestRowIndices.push(...bins[x][y])\n    y++\n  }\n\n  y--\n  x--\n\n  while (x >= i0) {\n    closestRowIndices.push(...bins[x][y])\n    x--\n  }\n\n  x++\n  y--\n\n  while (y >= j0) {\n    closestRowIndices.push(...bins[x][y])\n    y--\n  }\n\n  return closestRowIndices\n}\n\nconst sqDist = (x0: number, y0: number, x1: number, y1: number): number => {\n  return (x1 - x0) ** 2 + (y1 - y0) ** 2\n}\n\ninterface NearestIndexByGroup {\n  [groupKey: string]: {i: number; distance: number}\n}\n\n/*\n  This function is the one-dimensional analogue of `lookupIndex2D`; see\n  `lookupIndex2D` function for more info.\n*/\nconst lookupIndex1D = (\n  bins: number[][],\n  mouseCoord: number,\n  dataCoord: number,\n  colData: NumericColumnData,\n  groupColData: string[],\n  length: number\n): number[] => {\n  const initialBinIndex = getBinIndex(mouseCoord, length)\n  const maxBinIndex = bins.length - 1\n\n  let leftBinIndex = Math.max(0, initialBinIndex - 1)\n  let rightBinIndex = Math.min(initialBinIndex, maxBinIndex)\n  let leftRowIndices = bins[leftBinIndex]\n  let rightRowIndices = bins[rightBinIndex]\n\n  // If no points are within the current left and right bins, expand the search\n  // outward to the next nearest bins\n  while (\n    !leftRowIndices.length &&\n    !rightRowIndices.length &&\n    (leftBinIndex !== 0 || rightBinIndex !== maxBinIndex)\n  ) {\n    leftBinIndex = Math.max(0, leftBinIndex - 1)\n    rightBinIndex = Math.min(rightBinIndex + 1, maxBinIndex)\n    leftRowIndices = bins[leftBinIndex]\n    rightRowIndices = bins[rightBinIndex]\n  }\n\n  let nearestIndexByGroup: NearestIndexByGroup = {}\n\n  collectNearestIndices(\n    nearestIndexByGroup,\n    leftRowIndices,\n    dataCoord,\n    colData,\n    groupColData\n  )\n\n  collectNearestIndices(\n    nearestIndexByGroup,\n    rightRowIndices,\n    dataCoord,\n    colData,\n    groupColData\n  )\n\n  const nearestRows = Object.values(nearestIndexByGroup)\n\n  if (!nearestRows.length) {\n    return []\n  }\n\n  const nearestDistance = Math.min(...nearestRows.map(d => d.distance))\n\n  return nearestRows.filter(d => d.distance === nearestDistance).map(d => d.i)\n}\n\nconst collectNearestIndices = (\n  acc: NearestIndexByGroup,\n  rowIndices: number[],\n  dataCoord: number,\n  colData: NumericColumnData,\n  groupColData: string[]\n): void => {\n  for (const i of rowIndices) {\n    const group = groupColData[i]\n    const distance = Math.floor(Math.abs(dataCoord - colData[i]))\n\n    if (!acc[group] || distance < acc[group].distance) {\n      acc[group] = {i, distance}\n    }\n  }\n}\n","import {useRef, DependencyList} from 'react'\n\n/*\n  A hook that works like `useMemo`, but takes an additional boolean argument.\n  The factory will not be called until the boolean is true; until then, `null`\n  is returned.\n*/\nexport const useLazyMemo = <T>(\n  factory: () => T,\n  deps: DependencyList,\n  canCompute: boolean\n): T | null => {\n  const hasComputed = useRef(false)\n  const result = useRef<T>(null)\n  const prevDeps = useRef(deps)\n\n  if (!canCompute) {\n    return null\n  }\n\n  if (!hasComputed.current) {\n    hasComputed.current = true\n    result.current = factory()\n    prevDeps.current = deps\n\n    return result.current\n  }\n\n  const depsChanged = deps.some((x, i) => x !== prevDeps.current[i])\n\n  if (depsChanged) {\n    result.current = factory()\n    prevDeps.current = deps\n  }\n\n  return result.current\n}\n","import * as React from 'react'\nimport {useRef, useLayoutEffect, useMemo, FunctionComponent} from 'react'\n\nimport {LineLayerConfig} from '../types'\nimport {PlotEnv} from '../utils/PlotEnv'\nimport {drawLines} from '../utils/drawLines'\nimport {collectLineData, simplifyLineData} from '../utils/lineData'\nimport {clearCanvas} from '../utils/clearCanvas'\nimport {LineHoverLayer} from './LineHoverLayer'\nimport {FILL} from '../constants/columnKeys'\nimport {useHoverLineIndices} from '../utils/useHoverLineIndices'\n\ninterface Props {\n  env: PlotEnv\n  layerIndex: number\n  hoverX: number\n  hoverY: number\n}\n\nexport const LineLayer: FunctionComponent<Props> = ({\n  env,\n  layerIndex,\n  hoverX,\n  hoverY,\n}) => {\n  const table = env.getTable(layerIndex)\n  const fillScale = env.getScale(layerIndex, 'fill')\n  const {xScale, yScale, innerWidth: width, innerHeight: height} = env\n  const layer = env.config.layers[layerIndex] as LineLayerConfig\n\n  const {\n    interpolation,\n    x: xColKey,\n    y: yColKey,\n    lineWidth,\n    hoverDimension,\n    maxTooltipRows,\n  } = layer\n\n  const xColData = table.getColumn(xColKey, 'number')\n  const yColData = table.getColumn(yColKey, 'number')\n  const groupColData = table.getColumn(FILL, 'string')\n\n  const lineData = useMemo(\n    () => collectLineData(table, xColKey, yColKey, fillScale),\n    [table, xColKey, yColKey, fillScale]\n  )\n\n  // TODO: Simplify in data domain, resimplify when dimensions change on a\n  // debounced timer (for fast resizes)\n  const simplifiedLineData = useMemo(\n    () => simplifyLineData(lineData, xScale, yScale),\n    [lineData, xScale, yScale]\n  )\n\n  const resolvedHoverDimension =\n    hoverDimension === 'auto'\n      ? Object.keys(lineData).length > maxTooltipRows\n        ? 'xy'\n        : 'x'\n      : hoverDimension\n\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n\n  useLayoutEffect(() => {\n    clearCanvas(canvasRef.current, width, height)\n    drawLines({\n      canvas: canvasRef.current,\n      lineData: simplifiedLineData,\n      interpolation,\n      lineWidth,\n    })\n  }, [simplifiedLineData, canvasRef.current, interpolation, width, height])\n\n  const hoverRowIndices = useHoverLineIndices(\n    resolvedHoverDimension,\n    hoverX,\n    hoverY,\n    xColData,\n    yColData,\n    groupColData,\n    xScale,\n    yScale,\n    width,\n    height\n  )\n\n  const hasHoverData = hoverRowIndices && hoverRowIndices.length > 0\n\n  return (\n    <>\n      <canvas\n        className=\"vis-layer line\"\n        ref={canvasRef}\n        style={{\n          position: 'absolute',\n          opacity: resolvedHoverDimension === 'xy' && hasHoverData ? 0.4 : 1,\n        }}\n      />\n      {hasHoverData && (\n        <LineHoverLayer\n          env={env}\n          layerIndex={layerIndex}\n          lineData={simplifiedLineData}\n          rowIndices={hoverRowIndices}\n          dimension={resolvedHoverDimension}\n        />\n      )}\n    </>\n  )\n}\n","import {Table, Scale} from '../types'\nimport {simplify} from '../utils/simplify'\nimport {FILL} from '../constants/columnKeys'\n\nexport type LineData = {\n  [groupKey: string]: {\n    xs: number[] | Float64Array\n    ys: number[] | Float64Array\n    fill: string\n  }\n}\n\nexport const collectLineData = (\n  table: Table,\n  xColKey: string,\n  yColKey: string,\n  fillScale: Scale<string, string>\n): LineData => {\n  const xCol = table.getColumn(xColKey, 'number')\n  const yCol = table.getColumn(yColKey, 'number')\n  const groupCol = table.getColumn(FILL, 'string')\n\n  const result = {}\n\n  for (let i = 0; i < table.length; i++) {\n    const groupKey = groupCol[i]\n\n    if (!result[groupKey]) {\n      result[groupKey] = {\n        xs: [],\n        ys: [],\n        fill: fillScale(groupKey),\n      }\n    }\n\n    result[groupKey].xs.push(xCol[i])\n    result[groupKey].ys.push(yCol[i])\n  }\n\n  return result\n}\n\nexport const simplifyLineData = (\n  lineData: LineData,\n  xScale,\n  yScale\n): LineData => {\n  const result = {}\n\n  for (const [k, {xs, ys, fill}] of Object.entries(lineData)) {\n    const [simplifedXs, simplifiedYs] = simplify(\n      xs.map(x => xScale(x)),\n      ys.map(y => yScale(y)),\n      1\n    )\n\n    result[k] = {xs: simplifedXs, ys: simplifiedYs, fill}\n  }\n\n  return result\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: function() {\n    return this.rgb().hex();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: function() {\n    return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\n// https://beta.observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {range} from 'd3-array'\nimport {color} from 'd3-color'\n\nimport {Table, Scale} from '../types'\nimport {clearCanvas} from '../utils/clearCanvas'\nimport {X_MIN, X_MAX, Y_MIN, Y_MAX, COUNT} from '../constants/columnKeys'\n\ninterface DrawHeatmapOptions {\n  canvas: HTMLCanvasElement\n  width: number\n  height: number\n  table: Table\n  xScale: Scale<number, number>\n  yScale: Scale<number, number>\n  fillScale: Scale<number, string>\n  rows?: number[]\n  brighten?: number\n}\n\nexport const drawHeatmap = ({\n  canvas,\n  width,\n  height,\n  table,\n  xScale,\n  yScale,\n  fillScale,\n  rows,\n  brighten,\n}: DrawHeatmapOptions) => {\n  clearCanvas(canvas, width, height)\n\n  const context = canvas.getContext('2d')\n  const indices = rows ? rows : range(table.length)\n\n  const xMinData = table.getColumn(X_MIN, 'number')\n  const xMaxData = table.getColumn(X_MAX, 'number')\n  const yMinData = table.getColumn(Y_MIN, 'number')\n  const yMaxData = table.getColumn(Y_MAX, 'number')\n  const countData = table.getColumn(COUNT, 'number')\n\n  for (const i of indices) {\n    const xMin = xMinData[i]\n    const xMax = xMaxData[i]\n    const yMin = yMinData[i]\n    const yMax = yMaxData[i]\n    const count = countData[i]\n\n    const squareX = xScale(xMin)\n    const squareY = yScale(yMax)\n    const squareWidth = xScale(xMax) - squareX\n    const squareHeight = yScale(yMin) - squareY\n\n    let fill = fillScale(count)\n\n    if (brighten) {\n      fill = color(fill)\n        .brighter(3)\n        .hex()\n    }\n\n    context.beginPath()\n    context.rect(squareX, squareY, squareWidth, squareHeight)\n    context.fillStyle = fill\n    context.fill()\n  }\n}\n","import * as React from 'react'\nimport {useLayoutEffect, useRef, FunctionComponent} from 'react'\n\nimport {HeatmapLayerConfig} from '../types'\nimport {getTooltipData} from '../utils/heatmapTooltip'\nimport {Tooltip} from './Tooltip'\nimport {PlotEnv} from '../utils/PlotEnv'\nimport {drawHeatmap} from '../utils/drawHeatmap'\n\ninterface Props {\n  layerIndex: number\n  env: PlotEnv\n  hoveredRowIndices: number[]\n}\n\nexport const HeatmapHoverLayer: FunctionComponent<Props> = ({\n  layerIndex,\n  env,\n  hoveredRowIndices,\n}) => {\n  const {\n    innerWidth: width,\n    innerHeight: height,\n    xScale,\n    yScale,\n    config: {table: configTable, layers},\n  } = env\n\n  const {x: xColKey, y: yColKey} = layers[layerIndex] as HeatmapLayerConfig\n  const xColName = configTable.getColumnName(xColKey)\n  const yColName = configTable.getColumnName(yColKey)\n  const table = env.getTable(layerIndex)\n  const fillScale = env.getScale(layerIndex, 'fill')\n\n  const tooltipData = getTooltipData(\n    hoveredRowIndices,\n    xColKey,\n    yColKey,\n    xColName,\n    yColName,\n    env.getFormatterForColumn,\n    table\n  )\n\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n\n  useLayoutEffect(() => {\n    return drawHeatmap({\n      canvas: canvasRef.current,\n      width,\n      height,\n      table,\n      xScale,\n      yScale,\n      fillScale,\n      brighten: 1,\n      rows: hoveredRowIndices,\n    })\n  }, [\n    canvasRef.current,\n    width,\n    height,\n    table,\n    xScale,\n    yScale,\n    fillScale,\n    hoveredRowIndices,\n  ])\n\n  return (\n    <>\n      <canvas\n        className=\"vis-layer heatmap-interactions\"\n        ref={canvasRef}\n        style={{position: 'absolute', top: 0, left: 0}}\n      />\n      {tooltipData && <Tooltip data={tooltipData} env={env} />}\n    </>\n  )\n}\n","import {range} from 'd3-array'\n\nimport {Table, TooltipData, ColumnType} from '../types'\nimport {getRangeLabel} from './tooltip'\nimport {X_MIN, X_MAX, Y_MIN, Y_MAX, COUNT} from '../constants/columnKeys'\n\nexport const findHoveredRowIndices = (\n  table: Table,\n  dataX: number,\n  dataY: number\n): number[] => {\n  const xMinData = table.getColumn(X_MIN, 'number')\n  const xMaxData = table.getColumn(X_MAX, 'number')\n  const yMinData = table.getColumn(Y_MIN, 'number')\n  const yMaxData = table.getColumn(Y_MAX, 'number')\n  const countData = table.getColumn(COUNT, 'number')\n\n  const hoveredRowIndices = range(table.length).filter(\n    i =>\n      xMinData[i] <= dataX &&\n      xMaxData[i] > dataX &&\n      yMinData[i] <= dataY &&\n      yMaxData[i] > dataY &&\n      countData[i] !== 0\n  )\n\n  return hoveredRowIndices\n}\n\nexport const getTooltipData = (\n  hoveredRowIndices: number[] | null,\n  xColKey: string,\n  yColKey: string,\n  xColName: string,\n  yColName: string,\n  getValueFormatter: (colKey: string) => (x: any) => string,\n  table: Table\n): TooltipData => {\n  if (!hoveredRowIndices || hoveredRowIndices.length === 0) {\n    return null\n  }\n\n  const xMinData = table.getColumn(X_MIN, 'number')\n  const xMaxData = table.getColumn(X_MAX, 'number')\n  const yMinData = table.getColumn(Y_MIN, 'number')\n  const yMaxData = table.getColumn(Y_MAX, 'number')\n  const countData = table.getColumn(COUNT, 'number')\n  const xFormatter = getValueFormatter(xColKey)\n  const yFormatter = getValueFormatter(yColKey)\n  const countFormatter = getValueFormatter('count')\n\n  const xColumn = {\n    key: xColKey,\n    name: xColName,\n    type: 'number' as ColumnType,\n    colors: null,\n    values: hoveredRowIndices.map(i =>\n      getRangeLabel(xMinData[i], xMaxData[i], xFormatter)\n    ),\n  }\n\n  const yColumn = {\n    key: yColKey,\n    name: yColName,\n    type: 'number' as ColumnType,\n    colors: null,\n    values: hoveredRowIndices.map(i =>\n      getRangeLabel(yMinData[i], yMaxData[i], yFormatter)\n    ),\n  }\n\n  const countColumn = {\n    key: 'count',\n    name: 'count',\n    type: 'number' as ColumnType,\n    colors: null,\n    values: hoveredRowIndices.map(i => countFormatter(countData[i])),\n  }\n\n  return [xColumn, yColumn, countColumn]\n}\n","import * as React from 'react'\nimport {useRef, useLayoutEffect, FunctionComponent} from 'react'\n\nimport {HeatmapHoverLayer} from './HeatmapHoverLayer'\nimport {PlotEnv} from '../utils/PlotEnv'\nimport {findHoveredRowIndices} from '../utils/heatmapTooltip'\nimport {drawHeatmap} from '../utils/drawHeatmap'\n\ninterface Props {\n  layerIndex: number\n  env: PlotEnv\n  hoverX: number\n  hoverY: number\n}\n\nexport const HeatmapLayer: FunctionComponent<Props> = ({\n  layerIndex,\n  env,\n  hoverX,\n  hoverY,\n}) => {\n  const {innerWidth: width, innerHeight: height, xScale, yScale} = env\n  const fillScale = env.getScale(layerIndex, 'fill')\n  const table = env.getTable(layerIndex)\n\n  let hoveredRowIndices = null\n\n  if (hoverX && hoverY) {\n    hoveredRowIndices = findHoveredRowIndices(\n      table,\n      xScale.invert(hoverX),\n      yScale.invert(hoverY)\n    )\n  }\n\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n\n  useLayoutEffect(() => {\n    return drawHeatmap({\n      canvas: canvasRef.current,\n      width,\n      height,\n      table,\n      xScale,\n      yScale,\n      fillScale,\n    })\n  }, [canvasRef.current, width, height, table, xScale, yScale, fillScale])\n\n  return (\n    <>\n      <canvas className=\"vis-layer heatmap\" ref={canvasRef} />\n      {hoveredRowIndices && hoveredRowIndices.length > 0 && (\n        <HeatmapHoverLayer\n          layerIndex={layerIndex}\n          env={env}\n          hoveredRowIndices={hoveredRowIndices}\n        />\n      )}\n    </>\n  )\n}\n","export const drawCircle = (\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  diameter: number = 5\n) => {\n  ctx.lineWidth = diameter\n  ctx.beginPath()\n  ctx.lineCap = 'round'\n  ctx.moveTo(x, y)\n  ctx.lineTo(x, y)\n  ctx.stroke()\n  ctx.lineCap = 'butt'\n}\n\nexport const drawSquare = (\n  ctx: CanvasRenderingContext2D,\n  centerX: number,\n  centerY: number,\n  size: number = 4\n) => {\n  const x = centerX - size / 2\n  const y = centerY - size / 2\n\n  ctx.rect(x, y, size, size)\n  ctx.fill()\n}\n\nexport const drawTriangle = (\n  ctx: CanvasRenderingContext2D,\n  centerX: number,\n  centerY: number,\n  size: number = 3\n) => {\n  ctx.beginPath()\n  ctx.moveTo(centerX - size, centerY + size)\n  ctx.lineTo(centerX + size, centerY + size)\n  ctx.lineTo(centerX, centerY - size)\n  ctx.fill()\n}\n\nexport const drawPlus = (\n  ctx: CanvasRenderingContext2D,\n  centerX: number,\n  centerY: number,\n  size: number = 6\n) => {\n  const mid = size / 2\n\n  ctx.lineWidth = 1\n\n  ctx.beginPath()\n  ctx.moveTo(centerX - mid, centerY)\n  ctx.lineTo(centerX + mid, centerY)\n  ctx.stroke()\n\n  ctx.beginPath()\n  ctx.moveTo(centerX, centerY - mid)\n  ctx.lineTo(centerX, centerY + mid)\n  ctx.stroke()\n}\n\nexport const drawEx = (\n  ctx: CanvasRenderingContext2D,\n  centerX: number,\n  centerY: number,\n  size: number = 6\n) => {\n  const mid = size / 2\n\n  ctx.lineWidth = 1\n\n  ctx.beginPath()\n  ctx.moveTo(centerX - mid, centerY - mid)\n  ctx.lineTo(centerX + mid, centerY + mid)\n  ctx.closePath()\n  ctx.stroke()\n\n  ctx.beginPath()\n  ctx.moveTo(centerX - mid, centerY + mid)\n  ctx.lineTo(centerX + mid, centerY - mid)\n  ctx.closePath()\n  ctx.stroke()\n}\n\nexport const drawTritip = (\n  ctx: CanvasRenderingContext2D,\n  centerX: number,\n  centerY: number,\n  size: number = 3\n) => {\n  const cos30 = 0.86602540378\n  const sin30 = 0.5\n\n  ctx.lineWidth = 1\n\n  ctx.beginPath()\n  ctx.moveTo(centerX, centerY)\n  ctx.lineTo(centerX + cos30 * size, centerY + sin30 * size)\n  ctx.closePath()\n  ctx.stroke()\n\n  ctx.beginPath()\n  ctx.moveTo(centerX, centerY)\n  ctx.lineTo(centerX - cos30 * size, centerY + sin30 * size)\n  ctx.closePath()\n  ctx.stroke()\n\n  ctx.beginPath()\n  ctx.moveTo(centerX, centerY)\n  ctx.lineTo(centerX, centerY - size)\n  ctx.closePath()\n  ctx.stroke()\n}\n","import * as React from 'react'\nimport {useRef, useLayoutEffect, useMemo, FunctionComponent} from 'react'\nimport {SymbolType} from '../utils/getSymbolScale'\n\nimport {Table, Scale, ScatterLayerConfig, NumericColumnData} from '../types'\nimport {PlotEnv} from '../utils/PlotEnv'\nimport {clearCanvas} from '../utils/clearCanvas'\nimport {FILL, SYMBOL} from '../constants/columnKeys'\nimport {\n  drawCircle,\n  drawSquare,\n  drawPlus,\n  drawTriangle,\n  drawTritip,\n  drawEx,\n} from '../utils/drawShapes'\n\ntype ScatterData = {\n  xs: NumericColumnData\n  ys: NumericColumnData\n  fill: string[]\n  symbol: SymbolType[]\n}\n\nconst collectScatterData = (\n  table: Table,\n  xColKey: string,\n  yColKey: string,\n  fillScale: Scale<string, string>,\n  symbolScale: Scale<string, SymbolType>\n): ScatterData => ({\n  xs: table.getColumn(xColKey, 'number'),\n  ys: table.getColumn(yColKey, 'number'),\n  fill: table.getColumn(FILL, 'string').map(fillScale),\n  symbol: table.getColumn(SYMBOL, 'string').map(symbolScale),\n})\n\ninterface DrawPointsOptions {\n  canvas: HTMLCanvasElement\n  scatterData: ScatterData\n  width: number\n  height: number\n  xScale: Scale<number, number>\n  yScale: Scale<number, number>\n}\n\nconst drawPoints = ({\n  canvas,\n  scatterData: {xs, ys, fill, symbol},\n  width,\n  height,\n  xScale,\n  yScale,\n}: DrawPointsOptions): void => {\n  clearCanvas(canvas, width, height)\n\n  const context = canvas.getContext('2d')\n\n  for (var i = 0; i < xs.length; i++) {\n    const x = xScale(xs[i])\n    const y = yScale(ys[i])\n\n    const fillStyle = fill[i]\n    context.fillStyle = fillStyle\n    context.strokeStyle = fillStyle\n\n    const symbolType = symbol[i]\n    if (symbolType === 'circle') {\n      drawCircle(context, x, y)\n    } else if (symbolType === 'square') {\n      drawSquare(context, x, y)\n    } else if (symbolType === 'triangle') {\n      drawTriangle(context, x, y)\n    } else if (symbolType === 'plus') {\n      drawPlus(context, x, y)\n    } else if (symbolType === 'tritip') {\n      drawTritip(context, x, y)\n    } else if (symbolType === 'ex') {\n      drawEx(context, x, y)\n    }\n  }\n}\n\ninterface Props {\n  env: PlotEnv\n  layerIndex: number\n}\n\nexport const ScatterLayer: FunctionComponent<Props> = ({env, layerIndex}) => {\n  const canvas = useRef<HTMLCanvasElement>(null)\n\n  const table = env.getTable(layerIndex)\n\n  const fillScale = env.getScale(layerIndex, 'fill')\n  const symbolScale = env.getScale(layerIndex, 'symbol')\n\n  const layerConfig = env.config.layers[layerIndex] as ScatterLayerConfig\n\n  const {x: xColKey, y: yColKey} = layerConfig\n  const {xScale, yScale, innerWidth: width, innerHeight: height} = env\n\n  const scatterData = useMemo(\n    () => collectScatterData(table, xColKey, yColKey, fillScale, symbolScale),\n    [table, xColKey, yColKey, fillScale, symbolScale]\n  )\n\n  useLayoutEffect(() => {\n    drawPoints({\n      canvas: canvas.current,\n      scatterData,\n      width,\n      height,\n      xScale,\n      yScale,\n    })\n  }, [canvas.current, scatterData, width, height, xScale, yScale])\n\n  return <canvas className=\"vis-layer scatter\" ref={canvas} />\n}\n","import {Scale} from '../types'\nimport {DragEvent} from '../utils/useDragEvent'\n\nexport const getRectDimensions = (\n  event: DragEvent,\n  plotWidth: number,\n  plotHeight: number\n) => {\n  if (event.dragMode === 'brushX') {\n    const x = Math.max(0, Math.min(event.initialX, event.x))\n\n    const width = Math.min(Math.max(event.initialX, event.x) - x, plotWidth - x)\n\n    return {\n      x,\n      y: 0,\n      width,\n      height: plotHeight,\n    }\n  }\n\n  if (event.dragMode === 'brushY') {\n    const y = Math.max(0, Math.min(event.initialY, event.y))\n\n    const height = Math.min(\n      Math.max(event.initialY, event.y) - y,\n      plotHeight - y\n    )\n\n    return {\n      x: 0,\n      y,\n      width: plotWidth,\n      height: height,\n    }\n  }\n\n  return null\n}\n\nexport const rangeToDomain = (\n  [p0, p1]: number[],\n  scale: Scale<number, number>,\n  length: number\n): number[] => [\n  scale.invert(Math.max(Math.min(p0, p1), 0)),\n  scale.invert(Math.min(Math.max(p0, p1), length)),\n]\n","// Libraries\nimport * as React from 'react'\nimport {useLayoutEffect, FunctionComponent, CSSProperties} from 'react'\n\nimport {DragEvent} from '../utils/useDragEvent'\nimport {getRectDimensions} from '../utils/brush'\n\nconst MIN_SELECTION_SIZE = 5 // pixels\n\ninterface Props {\n  event: DragEvent | null\n  width: number\n  height: number\n  onXBrushEnd: (xRange: number[]) => void\n  onYBrushEnd: (yRange: number[]) => void\n}\n\nexport const Brush: FunctionComponent<Props> = ({\n  event,\n  width,\n  height,\n  onXBrushEnd,\n  onYBrushEnd,\n}) => {\n  useLayoutEffect(() => {\n    if (!event || !event.dragMode || event.type !== 'dragend') {\n      return\n    }\n\n    let p0\n    let p1\n    let callback\n\n    if (event.dragMode === 'brushX') {\n      p0 = Math.min(event.initialX, event.x)\n      p1 = Math.max(event.initialX, event.x)\n      callback = onXBrushEnd\n    } else if (event.dragMode === 'brushY') {\n      p0 = Math.min(event.initialY, event.y)\n      p1 = Math.max(event.initialY, event.y)\n      callback = onYBrushEnd\n    } else {\n      return\n    }\n\n    if (p1 - p0 < MIN_SELECTION_SIZE) {\n      return\n    }\n\n    callback([p0, p1])\n  })\n\n  if (!event || !event.dragMode || event.type === 'dragend') {\n    return null\n  }\n\n  const {x, y, width: brushWidth, height: brushHeight} = getRectDimensions(\n    event,\n    width,\n    height\n  )\n\n  const selectionStyle: CSSProperties = {\n    display: event.initialX === null ? 'none' : 'inherit',\n    position: 'absolute',\n    left: `${x}px`,\n    width: `${brushWidth}px`,\n    top: `${y}px`,\n    height: `${brushHeight}px`,\n    opacity: 0.1,\n    backgroundColor: 'aliceblue',\n  }\n\n  return <div className=\"vis-brush-selection\" style={selectionStyle} />\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal() {\n  var index = map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\nexport default function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0 ≅ u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  this.fill = match[1] || \" \";\n  this.align = match[2] || \">\";\n  this.sign = match[3] || \"-\";\n  this.symbol = match[4] || \"\";\n  this.zero = !!match[5];\n  this.width = match[6] && +match[6];\n  this.comma = !!match[7];\n  this.precision = match[8] && +match[8].slice(1);\n  this.trim = !!match[9];\n  this.type = match[10] || \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatNumerals from \"./formatNumerals\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTrim from \"./formatTrim\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\nimport identity from \"./identity\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal,\n      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,\n      percent = locale.percent || \"%\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision == null && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (i0 > 0) { if (!+s[i]) break out; i0 = 0; } break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationSecond} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import {bisector, tickStep} from \"d3-array\";\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport {map} from \"./array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport nice from \"./nice\";\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(identity, identity),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  var tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop, step) {\n    if (interval == null) interval = 10;\n\n    // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n    }\n\n    return step == null ? interval : interval.every(step);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval, step) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1, step);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval, step) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n        ? domain(nice(d, interval))\n        : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\n\nexport default function() {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import {calendar} from \"./time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcMillisecond} from \"d3-time\";\nimport {initRange} from \"./init\";\n\nexport default function() {\n  return initRange.apply(calendar(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcMillisecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n","export default function(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {identity} from \"./continuous\";\nimport {initInterpolator} from \"./init\";\nimport {linearish} from \"./linear\";\nimport {loggish} from \"./log\";\nimport {symlogish} from \"./symlog\";\nimport {powish} from \"./pow\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (t0 = transform(x0 = +_[0]), t1 = transform(x1 = +_[1]), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import {range} from 'd3-array'\nimport {scaleOrdinal} from 'd3-scale'\nimport {interpolateRgbBasis} from 'd3-interpolate'\n\nimport {Table, Scale} from '../types'\nimport {FILL} from '../constants/columnKeys'\n\nexport const getFillScale = (\n  table: Table,\n  colors: string[]\n): Scale<string, string> => {\n  const fillCol = table.getColumn(FILL, 'string')\n\n  const fillSet = Array.from(new Set(fillCol))\n\n  return getColorScale(fillSet, colors)\n}\n\n/*\n  Get a scale that maps elements of the domain to a color according to the\n  color scheme passed as `colors`.\n*/\nconst getColorScale = (\n  domain: string[],\n  colors: string[]\n): Scale<string, string> => {\n  let scaleRange = []\n\n  if (domain.length <= colors.length) {\n    scaleRange = colors.slice(0, domain.length)\n  } else {\n    const interpolator = interpolateRgbBasis(colors)\n\n    scaleRange = range(domain.length).map(k =>\n      interpolator(k / (domain.length - 1))\n    )\n  }\n\n  const scale = scaleOrdinal<string>()\n    .domain(domain)\n    .range(scaleRange)\n\n  return scale\n}\n","export const getGroupKey = (data: any[]): string => [...data].sort().join(' ')\n","import {Table} from '../types'\nimport {getGroupKey} from '../utils/getGroupKey'\n\nexport const appendGroupingCol = (\n  table: Table,\n  groupingColKeys: string[],\n  columnKey: string\n): Table => {\n  const groupKeysData = groupingColKeys.reduce(\n    (acc, k) => ({\n      ...acc,\n      [k]: table.getColumn(k),\n    }),\n    {}\n  )\n\n  const data: string[] = []\n\n  for (let i = 0; i < table.length; i++) {\n    data.push(getGroupKey(groupingColKeys.map(k => groupKeysData[k][i])))\n  }\n\n  return table.addColumn(columnKey, 'string', data)\n}\n","import {Table, LineLayerConfig, LineMappings, LineScales} from '../types'\nimport {getFillScale} from '../utils/getFillScale'\nimport {appendGroupingCol} from '../utils/appendGroupingCol'\nimport {FILL} from '../constants/columnKeys'\n\nexport const getLineTable = (table: Table, fill: string[]): Table =>\n  appendGroupingCol(table, fill, FILL)\n\nexport const getLineMappings = (\n  layerConfig: LineLayerConfig\n): LineMappings => ({\n  x: layerConfig.x,\n  y: layerConfig.y,\n  fill: layerConfig.fill,\n})\n\nexport const getLineScales = (table: Table, colors: string[]): LineScales => ({\n  fill: getFillScale(table, colors),\n})\n","import {scaleOrdinal} from 'd3-scale'\nimport {Table, Scale} from '../types'\nimport {SYMBOL} from '../constants/columnKeys'\n\nexport type SymbolType =\n  | 'circle'\n  | 'triangle'\n  | 'square'\n  | 'plus'\n  | 'tritip'\n  | 'ex'\n\nexport const getSymbolScale = (table: Table): Scale<string, SymbolType> => {\n  const symbolCol = table.getColumn(SYMBOL, 'string')\n  const uniqueValues = Array.from(new Set(symbolCol))\n\n  const symbolTypes: SymbolType[] = [\n    'circle',\n    'plus',\n    'triangle',\n    'square',\n    'tritip',\n    'ex',\n  ]\n\n  const scale = scaleOrdinal<string, SymbolType>()\n    .domain(uniqueValues)\n    .range(symbolTypes)\n\n  return scale\n}\n","import {Table, ScatterLayerConfig, ScatterMappings} from '../types'\nimport {getFillScale} from '../utils/getFillScale'\nimport {getSymbolScale} from '../utils/getSymbolScale'\nimport {appendGroupingCol} from '../utils/appendGroupingCol'\nimport {FILL, SYMBOL} from '../constants/columnKeys'\n\nexport const getScatterTable = (\n  table: Table,\n  fill: string[],\n  symbol: string[]\n): Table => {\n  const withFillCol = appendGroupingCol(table, fill, FILL)\n  const withSymbolCol = appendGroupingCol(withFillCol, symbol, SYMBOL)\n\n  return withSymbolCol\n}\n\nexport const getScatterMappings = (\n  layerConfig: ScatterLayerConfig\n): ScatterMappings => ({\n  x: layerConfig.x,\n  y: layerConfig.y,\n  fill: layerConfig.fill,\n  symbol: layerConfig.symbol,\n})\n\nexport const getScatterScales = (table: Table, colors: string[]) => ({\n  fill: getFillScale(table, colors),\n  symbol: getSymbolScale(table),\n})\n","import {Table, ColumnType, ColumnData} from '../types'\n\n// Don't export me!\nclass SimpleTable implements Table {\n  public readonly length: number = 0\n\n  private columns: {\n    [colKey: string]: {\n      name: string\n      type: ColumnType\n      data: ColumnData\n    }\n  } = {}\n\n  constructor(length: number) {\n    this.length = length\n  }\n\n  get columnKeys(): string[] {\n    return Object.keys(this.columns)\n  }\n\n  getColumn(columnKey: string, columnType?: ColumnType): any[] {\n    const column = this.columns[columnKey]\n\n    if (!column) {\n      throw new Error('column not found')\n    }\n\n    // Allow time columns to be retrieved as number columns\n    const isWideningTimeType = columnType === 'number' && column.type === 'time'\n\n    if (columnType && columnType !== column.type && !isWideningTimeType) {\n      throw new Error(\n        `expected ${columnType} column, found ${column.type} column instead`\n      )\n    }\n\n    switch (columnType) {\n      case 'number':\n        return column.data as number[]\n      case 'time':\n        return column.data as number[]\n      case 'string':\n        return column.data as string[]\n      case 'boolean':\n        return column.data as boolean[]\n      default:\n        return column.data as any[]\n    }\n  }\n\n  getColumnName(columnKey: string): string {\n    const column = this.columns[columnKey]\n\n    if (!column) {\n      throw new Error('column not found')\n    }\n\n    return column.name\n  }\n\n  getColumnType(columnKey: string): ColumnType {\n    const column = this.columns[columnKey]\n\n    if (!column) {\n      throw new Error('column not found')\n    }\n\n    return column.type\n  }\n\n  addColumn(\n    columnKey: string,\n    type: ColumnType,\n    data: ColumnData,\n    name?: string\n  ): Table {\n    if (this.columns[columnKey]) {\n      throw new Error('column already exists')\n    }\n\n    if (data.length !== this.length) {\n      throw new Error(\n        `expected column of length ${this.length}, got column of length ${\n          data.length\n        } instead`\n      )\n    }\n\n    const table = new SimpleTable(this.length)\n\n    table.columns = {\n      ...this.columns,\n      [columnKey]: {\n        name: name || columnKey,\n        type,\n        data,\n      },\n    }\n\n    return table\n  }\n}\n\nexport const newTable = (length: number): Table => new SimpleTable(length)\n","import {extent, range} from 'd3-array'\nimport {interpolateRgbBasis} from 'd3-interpolate'\nimport {scaleSequential} from 'd3-scale'\n\nimport {newTable} from '../utils/newTable'\nimport {Table, HeatmapScales, HeatmapMappings, Scale} from '../types'\nimport {X_MIN, X_MAX, Y_MIN, Y_MAX, COUNT} from '../constants/columnKeys'\n\nexport const getHeatmapTable = (\n  table: Table,\n  xColKey: string,\n  yColKey: string,\n  xDomain: number[],\n  yDomain: number[],\n  width: number,\n  height: number,\n  binSize: number\n): Table =>\n  bin2d(table, xColKey, yColKey, xDomain, yDomain, width, height, binSize)\n\nexport const getHeatmapScales = (\n  table: Table,\n  colors: string[]\n): HeatmapScales => {\n  const domain = extent(table.getColumn(COUNT, 'number'))\n  const colorScheme = interpolateRgbBasis(colors)\n  const fillScale = scaleSequential(colorScheme).domain(domain)\n\n  return {\n    fill: fillScale as Scale<number, string>,\n  }\n}\n\nexport const getHeatmapMappings = (): HeatmapMappings => ({\n  xMin: 'xMin',\n  xMax: 'xMax',\n  yMin: 'yMin',\n  yMax: 'yMax',\n  fill: 'count',\n})\n\nexport const bin2d = (\n  table: Table,\n  xColKey: string,\n  yColKey: string,\n  xDomain: number[],\n  yDomain: number[],\n  width: number,\n  height: number,\n  binSize: number\n): Table => {\n  const xColData = table.getColumn(xColKey, 'number')\n  const yColData = table.getColumn(yColKey, 'number')\n  const xColType = table.getColumnType(xColKey) as 'time' | 'number'\n  const yColType = table.getColumnType(yColKey) as 'time' | 'number'\n\n  if (!xDomain) {\n    xDomain = extent(xColData)\n  }\n\n  if (!yDomain) {\n    yDomain = extent(yColData)\n  }\n\n  const xBinCount = Math.floor(width / binSize)\n  const yBinCount = Math.floor(height / binSize)\n\n  // Count occurences in each bin in a `xBinCount` by `yBinCount` matrix\n  //\n  //                 4th y bin\n  //\n  //                     │\n  //                     │\n  //                     v\n  //       [\n  //           [0, 1, 2, 0, 0],\n  //           [0, 1, 0, 2, 0],  <──── 2nd x bin\n  //           [1, 0, 5, 7, 3]\n  //       ]\n  //\n  const bins = range(xBinCount).map(__ => new Array(yBinCount).fill(0))\n\n  for (let i = 0; i < table.length; i++) {\n    const x = xColData[i]\n    const y = yColData[i]\n\n    const shouldSkipPoint =\n      !x ||\n      !y ||\n      x < xDomain[0] ||\n      x > xDomain[1] ||\n      y < yDomain[0] ||\n      y > yDomain[1]\n\n    if (shouldSkipPoint) {\n      continue\n    }\n\n    const xBinIndex = getBinIndex(x, xDomain, xBinCount)\n    const yBinIndex = getBinIndex(y, yDomain, yBinCount)\n\n    bins[xBinIndex][yBinIndex] += 1\n  }\n\n  // Now build a `Table` from that matrix\n\n  const xBinWidth = (xDomain[1] - xDomain[0]) / xBinCount\n  const yBinWidth = (yDomain[1] - yDomain[0]) / yBinCount\n\n  const xMinData: number[] = []\n  const xMaxData: number[] = []\n  const yMinData: number[] = []\n  const yMaxData: number[] = []\n  const countData: number[] = []\n\n  for (let i = 0; i < xBinCount; i++) {\n    for (let j = 0; j < yBinCount; j++) {\n      xMinData.push(xDomain[0] + i * xBinWidth)\n      xMaxData.push(xDomain[0] + (i + 1) * xBinWidth)\n      yMinData.push(yDomain[0] + j * yBinWidth)\n      yMaxData.push(yDomain[0] + (j + 1) * yBinWidth)\n      countData.push(bins[i][j])\n    }\n  }\n\n  const heatmapTable = newTable(xMinData.length)\n    .addColumn(X_MIN, xColType, xMinData)\n    .addColumn(X_MAX, xColType, xMaxData)\n    .addColumn(Y_MIN, yColType, yMinData)\n    .addColumn(Y_MAX, yColType, yMaxData)\n    .addColumn(COUNT, 'number', countData)\n\n  return heatmapTable\n}\n\nconst getBinIndex = (val: number, domain: number[], binCount: number) => {\n  const domainWidth = domain[1] - domain[0]\n  const percentage = (val - domain[0]) / domainWidth\n\n  let binIndex = Math.floor(percentage * binCount)\n\n  if (binIndex === binCount) {\n    // Special case: last bin is inclusive\n    binIndex = binCount - 1\n  }\n\n  return binIndex\n}\n","import {extent, range, thresholdSturges} from 'd3-array'\n\nimport {\n  Table,\n  HistogramMappings,\n  HistogramPosition,\n  HistogramScales,\n  NumericColumnData,\n} from '../types'\n\nimport {getGroupKey} from '../utils/getGroupKey'\nimport {getFillScale} from '../utils/getFillScale'\nimport {appendGroupingCol} from '../utils/appendGroupingCol'\nimport {X_MIN, X_MAX, Y_MIN, Y_MAX, COUNT, FILL} from '../constants/columnKeys'\nimport {newTable} from '../utils/newTable'\n\nexport const getHistogramTable = (\n  table: Table,\n  xColKey: string,\n  xDomain: number[],\n  groupColKeys: string[] = [],\n  binCount: number,\n  position: HistogramPosition\n): Table =>\n  appendGroupingCol(\n    bin(table, xColKey, xDomain, groupColKeys, binCount, position),\n    groupColKeys,\n    FILL\n  )\n\nexport const getHistogramMappings = (fill: string[]): HistogramMappings => ({\n  xMin: 'xMin',\n  xMax: 'xMax',\n  yMin: 'yMin',\n  yMax: 'yMax',\n  fill,\n})\n\nexport const getHistogramScales = (\n  table: Table,\n  colors: string[]\n): HistogramScales => ({\n  fill: getFillScale(table, colors),\n})\n\n/*\n  Compute the data of a histogram visualization.\n\n  The column specified by the `xColName` will be divided into `binCount` evenly\n  spaced bins, and the number of rows in each bin will be counted.\n\n  If the `groupKeyCols` option is passed, rows in each bin are further grouped\n  by the set of values for the `groupKeyCols` for the row.\n\n  The returned result is a table where each row represents a bar in a\n  (potentially stacked) histogram. For example, a histogram with two bins and\n  two groups in each bin (four bars total) might have a table that looks like\n  this:\n\n      xMin | xMax | yMin | yMax | host | cpu\n      --------------------------------------\n         0 |   10 |    0 |   21 |  \"a\" |   1\n         0 |   10 |   21 |   30 |  \"b\" |   1\n        10 |   20 |    0 |    4 |  \"a\" |   1\n        10 |   20 |    4 |    6 |  \"b\" |   1\n\n  If `binCount` is not provided, a default value will be provided using\n  [Sturges' formula][0].\n\n  [0]: https://en.wikipedia.org/wiki/Histogram#Sturges'_formula\n*/\nexport const bin = (\n  table: Table,\n  xColKey: string,\n  xDomain: number[],\n  groupColKeys: string[] = [],\n  binCount: number,\n  position: HistogramPosition\n): Table => {\n  const xColData = table.getColumn(xColKey, 'number')\n  const xColType = table.getColumnType(xColKey) as 'number'\n\n  if (!binCount) {\n    binCount = thresholdSturges(xColData)\n  }\n\n  xDomain = resolveXDomain(xColData, xDomain)\n\n  const bins = createBins(xDomain, binCount)\n\n  // A group is the set of key-value pairs that a row takes on for the column\n  // names specified in `groupColKeys`. The group key is a hashable\n  // representation of the values of these pairs. This object ends up looking\n  // like:\n  //\n  //     {\n  //       'cpu0,free': {cpu: 'cpu0', _field: 'free'},\n  //       'cpu1,free': {cpu: 'cpu1', _field: 'free'}\n  //     }\n  //\n  const groupsByGroupKey = {}\n\n  // Count x values by bin and group\n  for (let i = 0; i < xColData.length; i++) {\n    const x = xColData[i]\n\n    const shouldSkipPoint =\n      x === undefined ||\n      x === null ||\n      isNaN(x) ||\n      x < xDomain[0] ||\n      x > xDomain[1]\n\n    if (shouldSkipPoint) {\n      continue\n    }\n\n    const group = getGroup(table, groupColKeys, i)\n    const groupKey = getGroupKey(Object.values(group))\n    const xPercentage = (x - xDomain[0]) / (xDomain[1] - xDomain[0])\n\n    let binIndex = Math.floor(xPercentage * binCount)\n\n    if (binIndex === bins.length) {\n      // Special case: the maximum value should be clamped to the last bin\n      binIndex = bins.length - 1\n    }\n\n    const bin = bins[binIndex]\n\n    groupsByGroupKey[groupKey] = group\n\n    if (!bin.values[groupKey]) {\n      bin.values[groupKey] = 1\n    } else {\n      bin.values[groupKey] += 1\n    }\n  }\n\n  // Next, build up a tabular representation of each of these bins by group\n  const groupKeys = Object.keys(groupsByGroupKey)\n\n  const xMinData: number[] = []\n  const xMaxData: number[] = []\n  const yMinData: number[] = []\n  const yMaxData: number[] = []\n  const countData: number[] = []\n  const groupKeyData: {[k: string]: any[]} = groupColKeys.reduce(\n    (acc, k) => ({...acc, [k]: []}),\n    {}\n  )\n\n  for (let i = 0; i < groupKeys.length; i++) {\n    const groupKey = groupKeys[i]\n\n    for (const bin of bins) {\n      const count = bin.values[groupKey] || 0\n\n      let yMin = 0\n\n      if (position === 'stacked') {\n        yMin = groupKeys\n          .slice(0, i)\n          .reduce((sum, k) => sum + (bin.values[k] || 0), 0)\n      }\n\n      xMinData.push(bin.min)\n      xMaxData.push(bin.max)\n      yMinData.push(yMin)\n      yMaxData.push(yMin + count)\n      countData.push(count)\n\n      for (const [k, v] of Object.entries(groupsByGroupKey[groupKey])) {\n        groupKeyData[k].push(v)\n      }\n    }\n  }\n\n  let binTable = newTable(binCount * groupKeys.length)\n    .addColumn(X_MIN, xColType, xMinData)\n    .addColumn(X_MAX, xColType, xMaxData)\n    .addColumn(Y_MIN, 'number', yMinData)\n    .addColumn(Y_MAX, 'number', yMaxData)\n    .addColumn(COUNT, 'number', countData)\n\n  for (const [key, data] of Object.entries(groupKeyData)) {\n    const type = table.getColumnType(key)\n    const name = table.getColumnName(key)\n\n    binTable = binTable.addColumn(key, type, data, name)\n  }\n\n  return binTable\n}\n\nconst createBins = (\n  xDomain: number[],\n  binCount: number\n): Array<{max: number; min: number; values: {}}> => {\n  const domainWidth = xDomain[1] - xDomain[0]\n  const binWidth = domainWidth / binCount\n  const binMinimums = range(xDomain[0], xDomain[1], binWidth)\n\n  const bins = binMinimums.map((min, i) => {\n    const isLastBin = i === binMinimums.length - 1\n    const max = isLastBin ? xDomain[1] : binMinimums[i + 1]\n\n    return {min, max, values: {}}\n  })\n\n  return bins\n}\n\nconst resolveXDomain = (\n  xColData: NumericColumnData,\n  preferredXDomain?: number[]\n): [number, number] => {\n  let domain: [number, number]\n\n  if (preferredXDomain) {\n    domain = [preferredXDomain[0], preferredXDomain[1]]\n  } else {\n    domain = extent(xColData)\n  }\n\n  if (domain[0] === domain[1]) {\n    // Widen domains of zero width by an arbitrary amount so that they can be\n    // divided into bins\n    domain[1] = domain[0] + 1\n  }\n\n  return domain\n}\n\nconst getGroup = (table: Table, groupColKeys: string[], i: number) => {\n  const result = {}\n\n  for (const key of groupColKeys) {\n    result[key] = table.getColumn(key)[i]\n  }\n\n  return result\n}\n","export default function(values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}\n","export const getTimeFormatter = (domain: number[]) => {\n  const dateFormatter = getDateTickFormatter(domain)\n\n  return x => dateFormatter(new Date(x))\n}\n\nconst getDateTickFormatter = (domain: number[]) => {\n  const domainWidth = domain[1] - domain[0]\n\n  if (domainWidth < FORMATTERS[0][0]) {\n    return FORMATTERS[0][1]\n  }\n\n  if (domainWidth > FORMATTERS[FORMATTERS.length - 1][0]) {\n    return FORMATTERS[FORMATTERS.length - 1][1]\n  }\n\n  for (let i = 0; i < FORMATTERS.length - 1; i++) {\n    if (domainWidth > FORMATTERS[i][0] && domainWidth <= FORMATTERS[i + 1][0]) {\n      return FORMATTERS[i + 1][1]\n    }\n  }\n\n  return x => String(x)\n}\n\nconst leftPad = (x: number, n = 2, c = '0'): string => {\n  const s = String(x)\n\n  if (s.length >= n) {\n    return s\n  }\n\n  return c.repeat(n - s.length) + s\n}\n\n// prettier-ignore\nconst FORMATTERS: [number, ((d: Date) => string)][] = [\n  [\n    1000,\n    d => `${leftPad(d.getSeconds())}.${leftPad(d.getMilliseconds(), 3)}`\n  ],\n  [\n    1000 * 60 * 60,\n    d => `${leftPad(d.getHours())}:${leftPad(d.getMinutes())}:${leftPad(d.getSeconds())}`\n  ],\n  [\n    1000 * 60 * 60 * 24,\n    d => `${leftPad(d.getHours())}:${leftPad(d.getMinutes())}`\n  ],\n  [\n    1000 * 60 * 60 * 24 * 30,\n    d => `${d.getFullYear()}-${leftPad(d.getMonth() + 1)}-${leftPad(d.getDate())} ${leftPad(d.getHours())}:${leftPad(d.getMinutes())}`,\n  ],\n  [\n    1000 * 60 * 60 * 24 * 30,\n    d => `${d.getFullYear()}-${leftPad(d.getMonth() + 1)}-${leftPad(d.getDate())}`,\n  ],\n]\n","import {scaleUtc} from 'd3-scale'\nimport {ticks} from 'd3-array'\n\nimport {ColumnType} from '../types'\nimport {getTimeFormatter} from './getTimeFormatter'\nimport {TextMetrics} from './getTextMetrics'\n\nconst TICK_DENSITY = 0.5\n\nexport const getTicks = (\n  domain: number[],\n  length: number,\n  orientation: 'vertical' | 'horizontal',\n  columnType: ColumnType,\n  charMetrics: TextMetrics\n): number[] => {\n  let sampleTick\n\n  if (columnType === 'time') {\n    sampleTick = getTimeFormatter(domain)(domain[1])\n  } else {\n    sampleTick = String(domain[1])\n  }\n\n  const charLength =\n    orientation === 'vertical' ? charMetrics.height : charMetrics.width\n\n  const numTicks = getNumTicks(sampleTick, length, charLength)\n\n  if (columnType === 'time') {\n    return getTimeTicks(domain, length, numTicks)\n  }\n\n  return ticks(domain[0], domain[1], numTicks)\n}\n\nconst getNumTicks = (\n  sampleTick: string,\n  length: number,\n  charLength: number\n): number => {\n  const sampleTickWidth = sampleTick.length * charLength\n  const numTicks = Math.round((length / sampleTickWidth) * TICK_DENSITY)\n\n  return Math.max(numTicks, 2)\n}\n\nconst getTimeTicks = (\n  [d0, d1]: number[],\n  length: number,\n  numTicks: number\n): number[] => {\n  return scaleUtc()\n    .domain([d0, d1])\n    .range([0, length])\n    .ticks(numTicks)\n    .map(d => d.getTime())\n}\n","export const assert = (condition: boolean, errorMessage: string) => {\n  if (!condition) {\n    throw new Error(errorMessage)\n  }\n}\n","export interface TextMetrics {\n  width: number\n  height: number\n}\n\nexport const getTextMetrics = (font: string, text: string): TextMetrics => {\n  const div = document.createElement('div')\n  const span = document.createElement('span')\n\n  div.appendChild(span)\n\n  // Translate offscreen\n  div.setAttribute(\n    'style',\n    `font: ${font}; display: inline; position: fixed; transform: translate(-9999px, -9999px);`\n  )\n\n  document.body.appendChild(div)\n\n  span.innerText = text\n\n  const metrics = {\n    width: span.offsetWidth,\n    height: span.offsetHeight,\n  }\n\n  document.body.removeChild(div)\n\n  return metrics\n}\n","import {getTextMetrics} from './getTextMetrics'\nimport {maxBy} from './extrema'\n\nimport {\n  TICK_PADDING_TOP,\n  TICK_PADDING_RIGHT,\n  AXIS_LABEL_PADDING_BOTTOM,\n} from '../constants'\n\nexport const getMargins = (\n  showAxes: boolean,\n  xAxisLabel: string,\n  yAxisLabel: string,\n  yTicks: number[],\n  yTickFormatter: (tick: number) => string,\n  tickFont: string\n) => {\n  if (!showAxes) {\n    return {top: 1, right: 1, bottom: 1, left: 1}\n  }\n\n  const longestYTick = maxBy(d => d.length, yTicks.map(t => yTickFormatter(t)))\n\n  const {width: maxTextWidth, height: textHeight} = getTextMetrics(\n    tickFont,\n    longestYTick\n  )\n\n  const xAxisLabelHeight = xAxisLabel\n    ? textHeight + AXIS_LABEL_PADDING_BOTTOM\n    : 0\n\n  const yAxisLabelHeight = yAxisLabel\n    ? textHeight + AXIS_LABEL_PADDING_BOTTOM\n    : 0\n\n  return {\n    top: textHeight / 2,\n    right: 1,\n    bottom: textHeight + TICK_PADDING_TOP + xAxisLabelHeight,\n    left: maxTextWidth + TICK_PADDING_RIGHT + yAxisLabelHeight,\n  }\n}\n","/*\n  Given a source and target object, produce an object that is logically\n  equivalent to the target. The produced object will preserve the reference\n  identity of nodes in the source object whenever the path of the node matches\n  the path of a logically equivalent node in the target.\n\n  This helper enables memoization of functions whose inputs often change their\n  reference identity, but rarely change their logical identity.\n\n  More about logical and reference identity: a primitive object is one of the\n  following:\n\n  - number\n  - string\n  - boolean\n  - function\n  - `undefined`\n  - `null`\n    \n  If `a` and `b` are primitive objects, then `a` and `b` are logically\n  equivalent iff `a === b`. Two non-primitive objects are logically equivalent\n  iff they have logically equivalent children.\n\n  For example, let\n\n  ```\n  const foo = {a: [4, 5, {b: 'six'}]}\n  const bar = {a: [4, 5, {b: 'six'}]}\n  const baz = {a: [4, 5]}\n  ```\n\n  Then `foo` and `bar` are logically equivalent even though `foo !== bar` (i.e.\n  `foo` and `bar` do not have the same reference identity).  The objects `foo`\n  and `baz` are neither logically nor referentially identical.\n  \n*/\nexport const identityMerge = <S extends object, T extends object>(\n  source: S,\n  target: T\n): T => {\n  const wrappedSource = {root: source}\n  const wrappedTarget = {root: target}\n  const paths = enumeratePaths(wrappedTarget)\n  const result: any = {}\n\n  for (const path of paths) {\n    const sourceValue = getByPath(wrappedSource, path)\n    const targetValue = getByPath(wrappedTarget, path)\n\n    if (isEqual(sourceValue, targetValue)) {\n      setByPath(result, path, sourceValue)\n    } else {\n      setByPath(result, path, targetValue)\n    }\n  }\n\n  return result.root\n}\n\ntype Path = string[]\n\nexport const enumeratePaths = (\n  target: any,\n  pathToTarget: Path = [],\n  acc: Path[] = []\n): Path[] => {\n  if (target === undefined || target === null || typeof target === 'string') {\n    return acc\n  }\n\n  for (const key of Object.keys(target)) {\n    const currentPath = [...pathToTarget, key]\n\n    acc.push(currentPath)\n    enumeratePaths(target[key], currentPath, acc)\n  }\n\n  return acc\n}\n\nexport const getByPath = (target: any, path: Path): any => {\n  if (!path.length) {\n    return\n  }\n\n  try {\n    let i = 0\n    let currentTarget = target[path[i]]\n\n    while (currentTarget !== undefined) {\n      if (i === path.length - 1) {\n        return currentTarget\n      }\n\n      i += 1\n      currentTarget = currentTarget[path[i]]\n    }\n  } catch {}\n}\n\nexport const setByPath = (target: any, path: Path, value: any): void => {\n  if (!path.length) {\n    throw new Error('invalid path')\n  }\n\n  if (typeof target !== 'object') {\n    throw new Error('target of setByPath must be object')\n  }\n\n  if (path.length === 1) {\n    target[path[0]] = value\n  }\n\n  let i = -1\n  let currentTarget = target\n\n  while (i < path.length - 2) {\n    let nextTarget = currentTarget[path[i + 1]]\n\n    if (typeof nextTarget !== 'object') {\n      const isArrayKey = isNaN(+path[i + 1])\n\n      currentTarget[path[i + 1]] = isArrayKey ? {} : []\n      nextTarget = currentTarget[path[i + 1]]\n    }\n\n    i += 1\n    currentTarget = nextTarget\n  }\n\n  currentTarget[path[i + 1]] = value\n}\n\nexport const isEqual = (a: any, b: any): boolean => {\n  if (a === null || a === undefined || b === null || b === undefined) {\n    return a === b\n  }\n\n  switch (typeof b) {\n    case 'number':\n    case 'boolean':\n    case 'string':\n    case 'function':\n      return a === b\n    default: {\n      const aKeys = Object.keys(a)\n      const bKeys = Object.keys(b)\n\n      return (\n        aKeys.length === bKeys.length && aKeys.every(k => isEqual(a[k], b[k]))\n      )\n    }\n  }\n}\n","var shallowEqual = function shallowEqual(newValue, oldValue) {\n  return newValue === oldValue;\n};\n\nvar simpleIsEqual = function simpleIsEqual(newArgs, lastArgs) {\n  return newArgs.length === lastArgs.length && newArgs.every(function (newArg, index) {\n    return shallowEqual(newArg, lastArgs[index]);\n  });\n};\n\nfunction index (resultFn, isEqual) {\n  if (isEqual === void 0) {\n    isEqual = simpleIsEqual;\n  }\n\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n\n  var result = function result() {\n    for (var _len = arguments.length, newArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      newArgs[_key] = arguments[_key];\n    }\n\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  };\n\n  return result;\n}\n\nexport default index;\n","import memoizeOne from 'memoize-one'\n\n/*\n  Stores a cache of memoized functions which can be looked up by an arbitrary\n  key. The memoized functions are instatiated lazily.\n\n  Example:\n\n  ```\n  const f = () => {\n    console.log('f called')\n\n    return 2\n  }\n\n  const cache = new MemoizedFunctionCache()\n  const fMemoized = cache.get('myKey', f)\n\n  fMemoized() // logs \"f called\", returns 2\n  fMemoized() // returns 2\n  ```\n\n*/\nexport class MemoizedFunctionCache {\n  private memoizedFunctions: {\n    [key: string]: {memoized: Function; original: Function}\n  } = {}\n\n  public get<T extends (...args: any[]) => any>(key: string, fn: T): T {\n    if (!this.memoizedFunctions[key]) {\n      this.memoizedFunctions[key] = {\n        memoized: memoizeOne(fn),\n        original: fn,\n      }\n    }\n\n    const {memoized, original} = this.memoizedFunctions[key]\n\n    if (original !== fn) {\n      throw new Error(`expected ${fn} but found ${original}`)\n    }\n\n    return memoized as T\n  }\n}\n","import {format} from 'd3-format'\n\nconst MAX_DECIMALS = 4\n\nconst formatSmallNumber = format(`.${MAX_DECIMALS}~f`) // e.g. \"0.032\"\n\nconst formatLargeNumber = format(`.${MAX_DECIMALS}~s`) // e.g. \"2.452M\"\n\nexport const defaultNumberFormatter = (t: number) => {\n  if (t >= -1 && t <= 1) {\n    return formatSmallNumber(t)\n  }\n\n  return formatLargeNumber(t)\n}\n","import {scaleLinear} from 'd3-scale'\n\nimport {Scale} from '../types'\n\nexport const getLinearScale = (\n  domain: number[],\n  range: number[]\n): Scale<number, number> => {\n  return scaleLinear()\n    .domain(domain)\n    .range(range)\n}\n","import {\n  SizedConfig,\n  Margins,\n  Scale,\n  Table,\n  ColumnType,\n  LineLayerConfig,\n} from '../types'\n\nimport {\n  DEFAULT_RANGE_PADDING,\n  LAYER_DEFAULTS,\n  CONFIG_DEFAULTS,\n} from '../constants'\n\nimport * as transforms from '../layerTransforms'\nimport {getTicks} from './getTicks'\nimport {getTimeFormatter} from '../utils/getTimeFormatter'\nimport {assert} from './assert'\nimport {getTextMetrics} from './getTextMetrics'\nimport {getMargins} from './getMargins'\nimport {extentOfExtents} from './extrema'\nimport {flatMap} from './flatMap'\nimport {identityMerge} from './identityMerge'\nimport {MemoizedFunctionCache} from './MemoizedFunctionCache'\nimport {defaultNumberFormatter} from './defaultNumberFormatter'\nimport {getLinearScale} from './getLinearScale'\n\nconst X_DOMAIN_AESTHETICS = ['x', 'xMin', 'xMax']\nconst Y_DOMAIN_AESTHETICS = ['y', 'yMin', 'yMax']\nconst DEFAULT_X_DOMAIN: [number, number] = [0, 1]\nconst DEFAULT_Y_DOMAIN: [number, number] = [0, 1]\nconst DEFAULT_FORMATTER = x => String(x)\n\nexport class PlotEnv {\n  private _config: SizedConfig | null = null\n  private _xDomain: number[] | null = null\n  private _yDomain: number[] | null = null\n  private fns = new MemoizedFunctionCache()\n\n  public get config(): SizedConfig | null {\n    return this._config\n  }\n\n  public set config(config: SizedConfig) {\n    const prevConfig = this._config\n\n    this._config = mergeConfigs(config, prevConfig)\n\n    if (areUncontrolledDomainsStale(this._config, prevConfig)) {\n      this._xDomain = null\n      this._yDomain = null\n    }\n  }\n\n  public get margins(): Margins {\n    const {\n      yTicks,\n      config: {xAxisLabel, yAxisLabel, tickFont},\n    } = this\n\n    const getMarginsMemoized = this.fns.get('margins', getMargins)\n\n    return getMarginsMemoized(\n      this.config.showAxes,\n      xAxisLabel,\n      yAxisLabel,\n      yTicks,\n      this.yTickFormatter,\n      tickFont\n    )\n  }\n\n  public get innerWidth(): number {\n    const {width} = this.config\n    const {margins} = this\n\n    return width - margins.left - margins.right\n  }\n\n  public get innerHeight(): number {\n    const {height} = this.config\n    const {margins} = this\n\n    return height - margins.top - margins.bottom\n  }\n\n  public get xTicks(): number[] {\n    const getTicksMemoized = this.fns.get('xTicks', getTicks)\n\n    return getTicksMemoized(\n      this.xDomain,\n      this.config.width,\n      'horizontal',\n      this.getColumnTypeForAesthetics(['x', 'xMin', 'xMax']),\n      this.charMetrics\n    )\n  }\n\n  public get yTicks(): number[] {\n    const getTicksMemoized = this.fns.get('yTicks', getTicks)\n\n    return getTicksMemoized(\n      this.yDomain,\n      this.config.height,\n      'vertical',\n      this.getColumnTypeForAesthetics(['y', 'yMin', 'yMax']),\n      this.charMetrics\n    )\n  }\n\n  public get xScale(): Scale<number, number> {\n    const getXScaleMemoized = this.fns.get('xScale', getLinearScale)\n    const {xDomain, rangePadding, innerWidth} = this\n\n    return getXScaleMemoized(xDomain, [\n      rangePadding,\n      innerWidth - rangePadding * 2,\n    ])\n  }\n\n  public get yScale(): Scale<number, number> {\n    const getYScaleMemoized = this.fns.get('yScale', getLinearScale)\n    const {yDomain, rangePadding, innerHeight} = this\n\n    return getYScaleMemoized(yDomain, [\n      innerHeight - rangePadding * 2,\n      rangePadding,\n    ])\n  }\n\n  public get xDomain(): number[] {\n    if (this.isXControlled) {\n      return this.config.xDomain\n    }\n\n    if (!this._xDomain) {\n      this._xDomain = this.getXDomain()\n    }\n\n    return this._xDomain\n  }\n\n  public set xDomain(newXDomain: number[]) {\n    if (this.isXControlled) {\n      this.config.onSetXDomain(newXDomain)\n    } else {\n      this._xDomain = newXDomain\n    }\n  }\n\n  public get yDomain(): number[] {\n    if (this.isYControlled) {\n      return this.config.yDomain\n    }\n\n    if (!this._yDomain) {\n      this._yDomain = this.getYDomain()\n    }\n\n    return this._yDomain\n  }\n\n  public set yDomain(newYDomain: number[]) {\n    if (this.isYControlled) {\n      this.config.onSetYDomain(newYDomain)\n    } else {\n      this._yDomain = newYDomain\n    }\n  }\n\n  public get xTickFormatter(): (tick: number) => string {\n    const colKeys = this.getColumnKeysForAesthetics(X_DOMAIN_AESTHETICS)\n\n    return this.getFormatterForColumn(colKeys[0])\n  }\n\n  public get yTickFormatter(): (tick: number) => string {\n    const colKeys = this.getColumnKeysForAesthetics(Y_DOMAIN_AESTHETICS)\n\n    return this.getFormatterForColumn(colKeys[0])\n  }\n\n  public getFormatterForColumn = (colKey: string): ((x: any) => string) => {\n    const preferredFormatter = this.config.valueFormatters[colKey]\n\n    if (preferredFormatter) {\n      return preferredFormatter\n    }\n\n    const colType = this.getColumnTypeByKey(colKey)\n\n    switch (colType) {\n      case 'number':\n        return defaultNumberFormatter\n      case 'time':\n        return this.timeFormatter\n      default:\n        return DEFAULT_FORMATTER\n    }\n  }\n\n  public getTable = (layerIndex: number): Table => {\n    const table = this.config.table\n    const layerConfig = this.config.layers[layerIndex]\n    const transformKey = `${layerIndex} ${layerConfig.type} table`\n\n    switch (layerConfig.type) {\n      case 'line': {\n        const {fill} = layerConfig\n        const transform = this.fns.get(transformKey, transforms.getLineTable)\n\n        return transform(table, fill)\n      }\n      case 'scatter': {\n        const {fill, symbol} = layerConfig\n        const transform = this.fns.get(transformKey, transforms.getScatterTable)\n\n        return transform(table, fill, symbol)\n      }\n      case 'histogram': {\n        const {x, fill, binCount, position} = layerConfig\n\n        const transform = this.fns.get(\n          transformKey,\n          transforms.getHistogramTable\n        )\n\n        return transform(\n          table,\n          x,\n          this.config.xDomain,\n          fill,\n          binCount,\n          position\n        )\n      }\n      case 'heatmap': {\n        const {x, y, binSize} = layerConfig\n        const {width, height, xDomain, yDomain} = this.config\n        const transform = this.fns.get(transformKey, transforms.getHeatmapTable)\n\n        return transform(table, x, y, xDomain, yDomain, width, height, binSize)\n      }\n      default: {\n        return this.config.table\n      }\n    }\n  }\n\n  public getScale = (layerIndex: number, aesthetic: string): Scale => {\n    const {type: layerType, colors} = this.config.layers[layerIndex]\n    const transformKey = `${layerIndex} ${layerType} scales`\n    const table = this.getTable(layerIndex)\n\n    switch (layerType) {\n      case 'line': {\n        const getter = this.fns.get(transformKey, transforms.getLineScales)\n\n        return getter(table, colors)[aesthetic]\n      }\n      case 'scatter': {\n        const getter = this.fns.get(transformKey, transforms.getScatterScales)\n\n        return getter(table, colors)[aesthetic]\n      }\n      case 'histogram': {\n        const getter = this.fns.get(transformKey, transforms.getHistogramScales)\n\n        return getter(table, colors)[aesthetic]\n      }\n      case 'heatmap': {\n        const getter = this.fns.get(transformKey, transforms.getHeatmapScales)\n\n        return getter(table, colors)[aesthetic]\n      }\n      default: {\n        throw new Error(`${aesthetic} scale for layer ${layerIndex} not found`)\n      }\n    }\n  }\n\n  public getMapping = (\n    layerIndex: number,\n    aesthetic: string\n  ): string | null => {\n    const layerConfig = this.config.layers[layerIndex]\n\n    switch (layerConfig.type) {\n      case 'line':\n        return transforms.getLineMappings(layerConfig)[aesthetic]\n      case 'scatter':\n        return transforms.getScatterMappings(layerConfig)[aesthetic]\n      case 'heatmap':\n        return transforms.getHeatmapMappings()[aesthetic]\n      case 'histogram':\n        return transforms.getHistogramMappings(layerConfig.fill)[aesthetic]\n      default:\n        return null\n    }\n  }\n\n  public resetDomains = (): void => {\n    if (this.isXControlled) {\n      this.config.onResetXDomain()\n    } else {\n      this._xDomain = this.getXDomain()\n    }\n\n    if (this.isYControlled) {\n      this.config.onResetYDomain()\n    } else {\n      this._yDomain = this.getYDomain()\n    }\n  }\n\n  private get charMetrics() {\n    const getTextMetricsMemoized = this.fns.get('charMetrics', getTextMetrics)\n\n    // https://stackoverflow.com/questions/3949422/which-letter-of-the-english-alphabet-takes-up-most-pixels\n    return getTextMetricsMemoized(this.config.tickFont, 'W')\n  }\n\n  private get isXControlled() {\n    return (\n      this.config.xDomain &&\n      this.config.onSetXDomain &&\n      this.config.onResetXDomain\n    )\n  }\n\n  private get isYControlled() {\n    return (\n      this.config.yDomain &&\n      this.config.onSetYDomain &&\n      this.config.onResetYDomain\n    )\n  }\n\n  private get timeFormatter() {\n    const getTimeFormatterMemoized = this.fns.get(\n      'timeFormatter',\n      getTimeFormatter\n    )\n\n    return getTimeFormatterMemoized(this.xDomain)\n  }\n\n  private getXDomain() {\n    return this.getDomainForAesthetics(X_DOMAIN_AESTHETICS) || DEFAULT_X_DOMAIN\n  }\n\n  private getYDomain() {\n    return this.getDomainForAesthetics(Y_DOMAIN_AESTHETICS) || DEFAULT_Y_DOMAIN\n  }\n\n  private getColumnTypeForAesthetics(aesthetics: string[]): ColumnType | null {\n    const columnTypes: ColumnType[] = this.config.layers.reduce(\n      (acc, _, layerIndex) => {\n        const table = this.getTable(layerIndex)\n\n        const colKeys = aesthetics\n          .map(aes => this.getMapping(layerIndex, aes))\n          .filter(d => !!d)\n\n        return [...acc, ...colKeys.map(k => table.getColumnType(k))]\n      },\n      []\n    )\n\n    if (!columnTypes.length) {\n      return null\n    }\n\n    assert(\n      columnTypes.every(t => t === columnTypes[0]),\n      `found multiple column types for aesthetics \"${aesthetics}\"`\n    )\n\n    return columnTypes[0]\n  }\n\n  private getColumnKeysForAesthetics(aesthetics: string[]): string[] {\n    return flatMap((layer, layerIndex) => {\n      const columnKeysForLayer = aesthetics.reduce((acc, aes) => {\n        if (layer[aes]) {\n          return [...acc, layer[aes]]\n        }\n\n        const derivedMapping = this.getMapping(layerIndex, aes)\n\n        if (derivedMapping) {\n          return [...acc, derivedMapping]\n        }\n\n        return acc\n      }, [])\n\n      return columnKeysForLayer\n    }, this.config.layers)\n  }\n\n  private getDomainForAesthetics(aesthetics: string[]): number[] {\n    // Collect column data arrays for all columns in the plot currently mapped\n    // to any of the passed `aesthetics`\n    const colData: number[][] = this.config.layers.reduce(\n      (acc, _, layerIndex) => {\n        const table = this.getTable(layerIndex)\n\n        const colKeys = aesthetics\n          .map(aes => this.getMapping(layerIndex, aes))\n          .filter(d => !!d)\n\n        return [...acc, ...colKeys.map(k => table.getColumn(k))]\n      },\n      []\n    )\n\n    const fnKey = `extentOfExtents ${aesthetics.join(', ')}`\n    const fn = this.fns.get(fnKey, extentOfExtents)\n\n    // Compute the domain of all of those columns (memoized, since doing so is\n    // an expensive operation)\n    const domain = fn(...colData)\n\n    return domain\n  }\n\n  private getColumnTypeByKey(key: string): ColumnType {\n    if (this.config.table.columnKeys.includes(key)) {\n      return this.config.table.getColumnType(key)\n    }\n\n    for (let i = 0; i < this.config.layers.length; i++) {\n      const table = this.getTable(i)\n\n      if (table.columnKeys.includes(key)) {\n        return table.getColumnType(key)\n      }\n    }\n\n    return null\n  }\n\n  private get rangePadding(): number {\n    const specifiedLineWidths = this.config.layers\n      .filter(l => l.type === 'line')\n      .map(l => (l as LineLayerConfig).lineWidth)\n\n    return Math.max(DEFAULT_RANGE_PADDING, ...specifiedLineWidths)\n  }\n}\n\nconst applyLayerDefaults = (\n  layers: SizedConfig['layers']\n): SizedConfig['layers'] =>\n  layers.map(layer =>\n    LAYER_DEFAULTS[layer.type]\n      ? {...LAYER_DEFAULTS[layer.type], ...layer}\n      : layer\n  )\n\nconst mergeConfigs = (\n  config: SizedConfig,\n  prevConfig: SizedConfig | null\n): SizedConfig => ({\n  ...identityMerge(prevConfig, {\n    ...CONFIG_DEFAULTS,\n    ...config,\n    layers: applyLayerDefaults(config.layers),\n    // Avoid passing the `table` to `identityMerge` since checking its identity\n    // can be quite expensive if it is a large object\n    table: null,\n  }),\n  table: config.table,\n})\n\nconst areUncontrolledDomainsStale = (\n  config: SizedConfig,\n  prevConfig: SizedConfig\n): boolean => {\n  if (!prevConfig) {\n    return true\n  }\n\n  if (config.table !== prevConfig.table) {\n    return true\n  }\n\n  // TODO: can be stale via binCount\n\n  const xyMappingsChanged = [\n    ...X_DOMAIN_AESTHETICS,\n    ...Y_DOMAIN_AESTHETICS,\n  ].some(aes =>\n    config.layers.some(\n      (layer, layerIndex) => layer[aes] !== prevConfig.layers[layerIndex][aes]\n    )\n  )\n\n  if (xyMappingsChanged) {\n    return true\n  }\n\n  return false\n}\n","import {useState, useRef} from 'react'\n\nimport {SizedConfig} from '../types'\nimport {PlotEnv} from './PlotEnv'\nimport {useMountedEffect} from './useMountedEffect'\n\n/*\n  Get a `PlotEnv` for a plot.\n  \n  The `PlotEnv` will be instantiated if it doesn't already exist. If the passed\n  `config` changes, it will be set on the `PlotEnv` and the component will\n  rerender.\n*/\nexport const usePlotEnv = (config: SizedConfig): PlotEnv => {\n  const envRef = useRef(null)\n\n  if (envRef.current === null) {\n    envRef.current = new PlotEnv()\n    envRef.current.config = config\n  }\n\n  const [envRevision, setEnvRevision] = useState(0)\n\n  useMountedEffect(() => {\n    envRef.current.config = config\n    setEnvRevision(envRevision + 1)\n  }, [config])\n\n  return envRef.current\n}\n","import {useEffect, useRef, EffectCallback, DependencyList} from 'react'\n\n/*\n  Behaves like `useEffect`, but won't fire after the initial render of a\n  component.\n*/\nexport const useMountedEffect = (\n  effect: EffectCallback,\n  inputs?: DependencyList\n) => {\n  const isFirstRender = useRef(true)\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false\n\n      return\n    }\n\n    return effect()\n  }, inputs)\n}\n","import * as React from 'react'\nimport {\n  useRef,\n  useMemo,\n  useCallback,\n  FunctionComponent,\n  CSSProperties,\n} from 'react'\n\nimport {Axes} from './Axes'\nimport {SizedConfig} from '../types'\nimport {HistogramLayer} from './HistogramLayer'\nimport {LineLayer} from './LineLayer'\nimport {HeatmapLayer} from './HeatmapLayer'\nimport {ScatterLayer} from './ScatterLayer'\nimport {Brush} from './Brush'\nimport {rangeToDomain} from '../utils/brush'\nimport {usePlotEnv} from '../utils/usePlotEnv'\nimport {useMousePos} from '../utils/useMousePos'\nimport {useDragEvent} from '../utils/useDragEvent'\nimport {useForceUpdate} from '../utils/useForceUpdate'\n\ninterface Props {\n  config: SizedConfig\n}\n\nexport const SizedPlot: FunctionComponent<Props> = ({config, children}) => {\n  const env = usePlotEnv(config)\n\n  const {\n    margins,\n    config: {width, height, showAxes},\n  } = env\n\n  const plotStyle = useMemo(\n    () =>\n      ({\n        position: 'relative',\n        width: `${width}px`,\n        height: `${height}px`,\n        userSelect: 'none',\n      } as CSSProperties),\n    [width, height]\n  )\n\n  const innerPlotStyle = useMemo(\n    () =>\n      ({\n        position: 'absolute',\n        top: `${margins.top}px`,\n        right: `${margins.right}px`,\n        bottom: `${margins.bottom}px`,\n        left: `${margins.left}px`,\n        cursor: 'crosshair',\n      } as CSSProperties),\n    [margins]\n  )\n\n  const fullsizeStyle: CSSProperties = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  }\n\n  const forceUpdate = useForceUpdate()\n  const innerPlotRef = useRef<HTMLDivElement>(null)\n  const [hoverEvent, hoverProps] = useMousePos()\n  const dragEvent = useDragEvent(innerPlotRef.current)\n  const hoverX = dragEvent ? null : hoverEvent.x\n  const hoverY = dragEvent ? null : hoverEvent.y\n\n  const handleXBrushEnd = useCallback(\n    (xRange: number[]) => {\n      env.xDomain = rangeToDomain(xRange, env.xScale, env.innerWidth)\n      forceUpdate()\n    },\n    [env.xScale, env.innerWidth, forceUpdate]\n  )\n\n  const handleYBrushEnd = useCallback(\n    (yRange: number[]) => {\n      env.yDomain = rangeToDomain(yRange, env.yScale, env.innerHeight).reverse()\n      forceUpdate()\n    },\n    [env.yScale, env.innerHeight, forceUpdate]\n  )\n\n  const handleResetDomains = useCallback(() => {\n    env.resetDomains()\n    forceUpdate()\n  }, [env])\n\n  return (\n    <div className=\"vis-plot\" style={plotStyle}>\n      {showAxes && <Axes env={env} style={fullsizeStyle} />}\n      <div\n        className=\"vis-inner-plot\"\n        style={innerPlotStyle}\n        ref={innerPlotRef}\n        onDoubleClick={handleResetDomains}\n        {...hoverProps}\n      >\n        <div className=\"vis-layers\" style={fullsizeStyle}>\n          {config.layers.map((layer, i) => {\n            switch (layer.type) {\n              case 'line':\n                return (\n                  <LineLayer\n                    key={i}\n                    layerIndex={i}\n                    env={env}\n                    hoverX={hoverX}\n                    hoverY={hoverY}\n                  />\n                )\n              case 'histogram':\n                return (\n                  <HistogramLayer\n                    key={i}\n                    layerIndex={i}\n                    env={env}\n                    hoverX={hoverX}\n                    hoverY={hoverY}\n                  />\n                )\n              case 'heatmap':\n                return (\n                  <HeatmapLayer\n                    key={i}\n                    layerIndex={i}\n                    env={env}\n                    hoverX={hoverX}\n                    hoverY={hoverY}\n                  />\n                )\n              case 'scatter':\n                return <ScatterLayer key={i} layerIndex={i} env={env} />\n              default:\n                return null\n            }\n          })}\n          {children && children}\n        </div>\n        <Brush\n          event={dragEvent}\n          width={env.innerWidth}\n          height={env.innerHeight}\n          onXBrushEnd={handleXBrushEnd}\n          onYBrushEnd={handleYBrushEnd}\n        />\n      </div>\n    </div>\n  )\n}\n","import {useReducer} from 'react'\n\nexport const useForceUpdate = () => {\n  return useReducer(count => count + 1, 0)[1] as () => void\n}\n","import {useRef, useReducer, useEffect} from 'react'\n\n// Minimum number of pixels a user must brush before we decide whether the\n// action is a vertical or horizontal brush\nconst MIN_BRUSH_DELTA = 5\n\nexport interface DragEvent {\n  type: 'drag' | 'dragend'\n  initialX: number\n  initialY: number\n  dragMode: 'brushX' | 'brushY' | 'pan' | null\n  x: number\n  y: number\n  shiftKey: boolean\n  ctrlKey: boolean\n  metaKey: boolean\n}\n\nexport const useDragEvent = (el: HTMLElement): DragEvent | null => {\n  const dragJustEnded = useRef(false)\n  const isActive = useRef(false)\n\n  const [event, dispatch] = useReducer(\n    (state: DragEvent | null, {type, e}) => {\n      const {left, top} = el.getBoundingClientRect()\n      const x = e.pageX - left\n      const y = e.pageY - top\n\n      switch (type) {\n        case 'mousedown': {\n          return {\n            type: 'drag',\n            initialX: x,\n            initialY: y,\n            x,\n            y,\n            dragMode: null,\n            shiftKey: e.shiftKey,\n            metaKey: e.metaKey,\n            ctrlKey: e.ctrlKey,\n          }\n        }\n\n        case 'mousemove': {\n          let dragMode = state.dragMode\n\n          if (!dragMode) {\n            const dx = Math.abs(x - state.initialX)\n            const dy = Math.abs(y - state.initialY)\n\n            if (dx >= dy && dx > MIN_BRUSH_DELTA) {\n              dragMode = 'brushX'\n            } else if (dy > MIN_BRUSH_DELTA) {\n              dragMode = 'brushY'\n            }\n          }\n\n          return {\n            ...state,\n            type: 'drag',\n            dragMode,\n            x,\n            y,\n          }\n        }\n\n        case 'mouseup': {\n          return {\n            ...state,\n            type: 'dragend',\n            x,\n            y,\n          }\n        }\n\n        default: {\n          return null\n        }\n      }\n    },\n    null as never\n  )\n\n  useEffect(() => {\n    if (!el) {\n      return\n    }\n\n    const onMouseMove = (e: MouseEvent) => {\n      dispatch({type: 'mousemove', e})\n    }\n\n    const onMouseDown = (e: MouseEvent) => {\n      document.addEventListener('mousemove', onMouseMove)\n      dragJustEnded.current = false\n      isActive.current = true\n      dispatch({type: 'mousedown', e})\n    }\n\n    const onMouseUp = (e: MouseEvent) => {\n      document.removeEventListener('mousemove', onMouseMove)\n      dragJustEnded.current = true\n      dispatch({type: 'mouseup', e})\n    }\n\n    el.addEventListener('mousedown', onMouseDown)\n    document.addEventListener('mouseup', onMouseUp)\n\n    return () => {\n      el.removeEventListener('mousedown', onMouseDown)\n      document.removeEventListener('mouseup', onMouseUp)\n      document.removeEventListener('mousemove', onMouseMove)\n    }\n  }, [el])\n\n  if (!isActive.current) {\n    return null\n  }\n\n  if (dragJustEnded.current) {\n    isActive.current = false\n    return event\n  }\n\n  return event\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows\n  };\n}\n","import dsv from \"./dsv\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\n","import {csvParse, csvParseRows} from 'd3-dsv'\n\nimport {Table, ColumnType} from '../types'\nimport {assert} from './assert'\nimport {newTable} from './newTable'\n\nexport interface FromFluxResult {\n  // The single parsed `Table`\n  table: Table\n\n  // The union of unique group keys from all input Flux tables\n  fluxGroupKeyUnion: string[]\n}\n\ntype Column =\n  | {name: string; type: 'number'; data: number[]}\n  | {name: string; type: 'time'; data: number[]}\n  | {name: string; type: 'boolean'; data: boolean[]}\n  | {name: string; type: 'string'; data: string[]}\n\ninterface Columns {\n  [columnKey: string]: Column\n}\n\n/*\n  Convert a [Flux CSV response][0] to a `Table`.\n\n  For example, given a series of Flux tables that look like this:\n\n      column_a | column_b | column_c  <-- name\n      long     | string   | long      <-- type\n      ------------------------------\n             1 |      \"g\" |       34\n             2 |      \"f\" |       58 \n             3 |      \"c\" |       21\n\n      column_b | column_d   <-- name\n      double   | boolean    <-- type\n      -------------------\n           1.0 |     true\n           2.0 |     true\n           3.0 |     true\n  \n  This function will spread them out to a single wide table that looks like\n  this instead:\n\n      column_a | column_b (string) | column_c | column_b (number) | column_d  <-- key\n      column_a | column_b          | column_c | column_b          | column_d  <-- name\n      number   | string            | number   | number            | bool      <-- type\n      ---------------------------------------------------------------------\n             1 |               \"g\" |       34 |                   | \n             2 |               \"f\" |       58 |                   |\n             3 |                   |       21 |                   |\n               |                   |          |               1.0 |     true\n               |                   |          |               2.0 |     true\n               |                   |          |               3.0 |     true\n\n\n  The `#group`, `#datatype`, and `#default` [annotations][1] are expected to be\n  in the input Flux CSV.\n\n  Values are coerced into appropriate JavaScript types based on the Flux\n  `#datatype` annotation for the table\n\n  The `Table` stores a `key` for each column which is seperate from the column\n  `name`. If multiple Flux tables have the same column but with different\n  types, they will be distinguished by different keys in the resulting `Table`;\n  otherwise the `key` and `name` for each column in the result table will be\n  identical.\n\n  [0]: https://github.com/influxdata/flux/blob/master/docs/SPEC.md#csv\n  [1]: https://github.com/influxdata/flux/blob/master/docs/SPEC.md#annotations\n*/\nexport const fromFlux = (fluxCSV: string): FromFluxResult => {\n  const columns: Columns = {}\n  const fluxGroupKeyUnion = new Set()\n  const chunks = splitChunks(fluxCSV)\n\n  let tableLength = 0\n\n  for (const chunk of chunks) {\n    const tableText = extractTableText(chunk)\n    const tableData = csvParse(tableText)\n    const annotationText = extractAnnotationText(chunk)\n    const annotationData = parseAnnotations(annotationText, tableData.columns)\n\n    for (const columnName of tableData.columns.slice(1)) {\n      const columnType = toColumnType(\n        annotationData.datatypeByColumnName[columnName]\n      )\n\n      const columnKey = `${columnName} (${columnType})`\n\n      if (!columns[columnKey]) {\n        columns[columnKey] = {\n          name: columnName,\n          type: columnType,\n          data: [],\n        } as Column\n      }\n\n      const colData = columns[columnKey].data\n      const columnDefault = annotationData.defaultByColumnName[columnName]\n\n      for (let i = 0; i < tableData.length; i++) {\n        colData[tableLength + i] = parseValue(\n          tableData[i][columnName] || columnDefault,\n          columnType\n        )\n      }\n\n      if (annotationData.groupKey.includes(columnName)) {\n        fluxGroupKeyUnion.add(columnKey)\n      }\n    }\n\n    tableLength += tableData.length\n  }\n\n  resolveNames(columns, fluxGroupKeyUnion)\n\n  const table = Object.entries(columns).reduce(\n    (table, [key, {name, type, data}]) => {\n      data.length = tableLength\n\n      return table.addColumn(key, type, data, name)\n    },\n    newTable(tableLength)\n  )\n\n  const result = {table, fluxGroupKeyUnion: Array.from(fluxGroupKeyUnion)}\n\n  return result\n}\n\nconst splitChunks = (fluxCSV: string): string[] => {\n  const trimmedResponse = fluxCSV.trim()\n\n  if (trimmedResponse === '') {\n    return []\n  }\n\n  const chunks = trimmedResponse.split(/\\n\\s*\\n/)\n\n  return chunks\n}\n\nconst extractAnnotationText = (chunk: string): string => {\n  const text = chunk\n    .split('\\n')\n    .filter(line => line.startsWith('#'))\n    .join('\\n')\n    .trim()\n\n  assert(\n    !!text,\n    'could not find annotation lines in Flux response; are `annotations` enabled in the Flux query `dialect` option?'\n  )\n\n  return text\n}\n\nconst parseAnnotations = (\n  annotationData: string,\n  headerRow: string[]\n): {\n  groupKey: string[]\n  datatypeByColumnName: {[columnName: string]: any}\n  defaultByColumnName: {[columnName: string]: any}\n} => {\n  const rows = csvParseRows(annotationData)\n\n  const groupRow = rows.find(row => row[0] === '#group')\n  const datatypeRow = rows.find(row => row[0] === '#datatype')\n  const defaultRow = rows.find(row => row[0] === '#default')\n\n  assert(!!groupRow, 'could not find group annotation in Flux response')\n  assert(!!datatypeRow, 'could not find datatype annotation in Flux response')\n  assert(!!defaultRow, 'could not find default annotation in Flux response')\n\n  const groupKey = groupRow.reduce(\n    (acc, val, i) => (val === 'true' ? [...acc, headerRow[i]] : acc),\n    []\n  )\n\n  const datatypeByColumnName = datatypeRow\n    .slice(1)\n    .reduce((acc, val, i) => ({...acc, [headerRow[i + 1]]: val}), {})\n\n  const defaultByColumnName = defaultRow\n    .slice(1)\n    .reduce((acc, val, i) => ({...acc, [headerRow[i + 1]]: val}), {})\n\n  return {groupKey, datatypeByColumnName, defaultByColumnName}\n}\n\nconst extractTableText = (chunk: string): string => {\n  const text = chunk\n    .split('\\n')\n    .filter(line => !line.startsWith('#'))\n    .join('\\n')\n    .trim()\n\n  return text\n}\n\nconst TO_COLUMN_TYPE: {[fluxDatatype: string]: ColumnType} = {\n  boolean: 'boolean',\n  unsignedLong: 'number',\n  long: 'number',\n  double: 'number',\n  string: 'string',\n  'dateTime:RFC3339': 'time',\n}\n\nconst toColumnType = (fluxDataType: string): ColumnType => {\n  const columnType = TO_COLUMN_TYPE[fluxDataType]\n\n  assert(!!columnType, `encountered unknown Flux column type ${fluxDataType}`)\n\n  return columnType\n}\n\nconst parseValue = (value: string | undefined, columnType: ColumnType): any => {\n  if (value === undefined) {\n    return undefined\n  }\n\n  if (value === 'null') {\n    return null\n  }\n\n  if (value === 'NaN') {\n    return NaN\n  }\n\n  if (columnType === 'boolean' && value === 'true') {\n    return true\n  }\n\n  if (columnType === 'boolean' && value === 'false') {\n    return false\n  }\n\n  if (columnType === 'string') {\n    return value\n  }\n\n  if (columnType === 'time') {\n    return Date.parse(value)\n  }\n\n  if (columnType === 'number') {\n    return Number(value)\n  }\n\n  return null\n}\n\n/*\n  Each column in a parsed `Table` can only have a single type, but because we\n  combine columns from multiple Flux tables into a single table, we may\n  encounter conflicting types for a given column during parsing.\n\n  To avoid this issue, we seperate the concept of the column _key_ and column\n  _name_ in the `Table` object, where each key is unique but each name is not\n  necessarily unique. We name the keys something like \"foo (int)\", where \"foo\"\n  is the name and \"int\" is the type.\n\n  But since type conflicts are rare and the public API requires referencing\n  columns by key, we want to avoid unwieldy keys whenever possible. So the last\n  stage of parsing is to rename all column keys from the `$NAME ($TYPE)` format\n  to just `$NAME` if we can do so safely. That is what this function does.\n*/\nconst resolveNames = (\n  columns: Columns,\n  fluxGroupKeyUnion: Set<string>\n): void => {\n  const colNameCounts = Object.values(columns)\n    .map(col => col.name)\n    .reduce((acc, name) => ({...acc, [name]: (acc[name] || 0) + 1}), {})\n\n  const uniqueColNames = Object.entries(colNameCounts)\n    .filter(([_, count]) => count === 1)\n    .map(([name]) => name)\n\n  for (const uniqueName of uniqueColNames) {\n    const [columnKey, column] = Object.entries(columns).find(\n      ([_, col]) => col.name === uniqueName\n    )\n\n    columns[uniqueName] = column\n\n    delete columns[columnKey]\n\n    if (fluxGroupKeyUnion.has(columnKey)) {\n      fluxGroupKeyUnion.delete(columnKey)\n      fluxGroupKeyUnion.add(uniqueName)\n    }\n  }\n}\n","import dsv from \"./dsv\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\n","import * as React from 'react'\nimport {FunctionComponent} from 'react'\nimport AutoSizer from 'react-virtualized-auto-sizer'\n\nimport {Config, SizedConfig} from '../types'\nimport {SizedPlot} from './SizedPlot'\n\ninterface Props {\n  config: Config\n}\n\nexport const Plot: FunctionComponent<Props> = ({config, children}) => {\n  if (config.width && config.height) {\n    return <SizedPlot config={config as SizedConfig}>{children}</SizedPlot>\n  }\n\n  return (\n    <AutoSizer className=\"vis-autosizer\">\n      {({width, height}) => {\n        if (width === 0 || height === 0) {\n          return null\n        }\n\n        return (\n          <SizedPlot config={{...config, width, height}}>{children}</SizedPlot>\n        )\n      }}\n    </AutoSizer>\n  )\n}\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","createDetectElementResize","nonce","_window","window","self","global","cancel","raf","attachEvent","document","requestFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","cancelFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","id","resetTriggers","element","triggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollTop","scrollHeight","style","width","offsetWidth","height","offsetHeight","scrollListener","target","className","indexOf","__resizeRAF__","__resizeLast__","checkTriggers","__resizeListeners__","forEach","animation","keyframeprefix","animationstartevent","domPrefixes","split","startEvents","elm","createElement","undefined","animationName","toLowerCase","animationKeyframes","animationStyle","addResizeListener","doc","ownerDocument","elementStyle","getComputedStyle","position","getElementById","css","head","getElementsByTagName","type","setAttribute","styleSheet","cssText","appendChild","createTextNode","createStyles","innerHTML","addEventListener","__animationListener__","removeResizeListener","detachEvent","splice","removeEventListener","removeChild","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","_extends","source","possibleConstructorReturn","ReferenceError","AutoSizer","_React$PureComponent","_ref","_temp","_this","_len","args","Array","_key","__proto__","getPrototypeOf","state","defaultHeight","defaultWidth","_onResize","_this$props","disableHeight","disableWidth","onResize","_parentNode","_height","_width","_style","paddingLeft","parseInt","paddingRight","paddingTop","paddingBottom","newHeight","newWidth","setState","_setRef","autoSizer","_autoSizer","subClass","superClass","create","constructor","setPrototypeOf","inherits","PureComponent","parentNode","defaultView","HTMLElement","_detectElementResize","_props","children","_state","outerStyle","overflow","childParams","bailoutOnChildren","ref","defaultProps","pi","Math","PI","tau","tauEpsilon","Path","_x0","_y0","_x1","_y1","_","path","x","moveTo","y","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","x0","y0","x21","y21","x01","y01","l01_2","Error","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","w","h","toString","Linear","context","_context","point","that","Basis","sign","slope3","h0","h1","s0","s1","min","slope2","t0","t1","MonotoneX","MonotoneY","ReflectContext","Natural","controlPoints","a","b","Step","_t","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","_t0","_x","_y","px","py","i0","i1","NINETEEN_EIGHTY_FOUR","CURVES","linear","curveLinear","monotoneX","monotoneY","cubic","step","stepBefore","stepAfter","natural","CONFIG_DEFAULTS","layers","valueFormatters","xAxisLabel","yAxisLabel","showAxes","axisColor","axisOpacity","gridColor","gridOpacity","tickFont","tickFontColor","legendFont","legendFontColor","legendFontBrightColor","legendBackgroundColor","legendBorder","legendCrosshairColor","LAYER_DEFAULTS","line","lineWidth","hoverDimension","fill","colors","DEFAULT_COLOR_SCHEME","interpolation","maxTooltipRows","heatmap","binSize","scatter","symbol","histogram","binCount","clearCanvas","canvas","getContext","dpRatio","devicePixelRatio","scale","clearRect","Axes","_a","env","useRef","innerWidth","innerHeight","margins","xTicks","yTicks","xTickFormatter","yTickFormatter","xScale","yScale","config","useLayoutEffect","_b","xAxisY","bottom","font","textAlign","textBaseline","xTicks_1","tslib_1.__values","xTick","left","right","strokeStyle","globalAlpha","beginPath","top","stroke","fillStyle","fillText","yTicks_1","yTick","save","translate","rotate","restore","drawAxes","current","React.createElement","compare","f","ascending","d","values","valueof","max","index","start","stop","ceil","range","e10","e5","e2","count","reverse","ticks","power","floor","log","LN10","pow","tickIncrement","isFinite","isVoid","getRangeLabel","formatter","getTooltipGroupColumns","table","rowIndices","groupColKeys","getValueFormatter","rowColors","map","colData","getColumn","name","getColumnName","getColumnType","FILL","mousePositionFromEvent","pageX","pageY","useTooltipStyle","el","useEffect","onMouseEnter","onMouseMove","onMouseLeave","entries","_d","k","v","useLayoutStyle","display","Tooltip","data","tooltipElement","classList","add","body","fontColor","fontBrightColor","backgroundColor","border","columnsWhitelist","columns","filter","column","includes","createPortal","color","borderRadius","padding","cursor","justifyContent","marginRight","marginBottom","maxWidth","textOverflow","whiteSpace","HistogramLayer","layerIndex","hoverX","hoverY","getTable","fillScale","getScale","xColKey","fillColKeys","hoveredRowIndices","xMinCol","xMaxCol","yMinCol","yMaxCol","groupKeyCol","width_1","height_1","alpha","clip","drawBars","xMinData","xMaxData","yMaxData","dataX","invert","dataY","some","findHoveredRowIndices","tooltipData","countData","groupCol","xFormatter","countFormatter","getTooltipData","getFormatterForColumn","isDefined","isNaN","drawLines","lineData","xs","ys","lineGenerator","pointX","pointY","defined","constant","curve","output","buffer","defined0","_f","sqSegmentDist","simplifyDouglasPeuckerHelper","epsilonSq","keep","maxIndex","maxDist","sqDist_1","simplify","epsilon","Uint8Array","prevX","prevY","keptLength","i_1","simplifiedXs","Float64Array","simplifiedYs","j","sqEpsilon","resultLength","xsResult","ysResult","LineHoverLayer","dimension","layer","yColKey","crosshairColor","xColData","yColData","groupColData","groupColKey","yFormatter","points","hoverRowIndices","getLineHoverPoints","crosshairX","crosshairY","canvasRef","groupKey","lineDatum","radius","points_1","_c","drawLineHoverData","flatMap","result","yss","yss_1","ys_1","extentOfExtents","_i","extent","useHoverLineIndices","mode","mouseX","mouseY","factory","deps","canCompute","hasComputed","prevDeps","isActive","buildIndex","lookupIndex1D","xBins","yBins","lookupIndex2D","xyBins","xBinCount","yBinCount","indexTable","xBinIndex","getBinIndex","yBinIndex","bins","j0","j1","closestRowIndices","hasSearchedEverything","collectClosestRowIndices","minX","minDistance","Infinity","xs_1","distance","minBy","rowIndex","sqDist","mouseCoord","dataCoord","initialBinIndex","maxBinIndex","leftBinIndex","rightBinIndex","leftRowIndices","rightRowIndices","nearestIndexByGroup","collectNearestIndices","nearestRows","nearestDistance","acc","rowIndices_1","group","LineLayer","useMemo","xCol","yCol","collectLineData","simplifiedLineData","_e","simplifedXs","simplifyLineData","resolvedHoverDimension","keys","hasHoverData","opacity","extend","parent","definition","Color","reI","reN","reP","reHex3","reHex6","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","format","trim","exec","Rgb","rgbn","rgba","hsla","g","rgbConvert","rgb","hex","round","Hsl","hsl2rgb","m1","m2","define","displayable","brighter","darker","hslConvert","deg2rad","rad2deg","Xn","Yn","Zn","t2","t3","labConvert","Lab","Hcl","c","z","rgb2lrgb","xyz2lab","lab2xyz","lrgb2rgb","atan2","hclConvert","A","B","C","D","E","ED","EB","BC_DA","Cubehelix","bl","cubehelixConvert","cosh","sinh","drawHeatmap","rows","brighten","indices","yMinData","indices_1","xMin","xMax","yMin","yMax","squareX","squareY","squareWidth","squareHeight","HeatmapHoverLayer","configTable","xColName","yColName","HeatmapLayer","drawCircle","ctx","diameter","lineCap","drawSquare","centerX","centerY","size","drawPlus","mid","drawEx","drawTritip","ScatterLayer","symbolScale","layerConfig","scatterData","collectScatterData","symbolType","drawTriangle","drawPoints","rangeToDomain","p0","p1","Brush","event","onXBrushEnd","onYBrushEnd","dragMode","callback","initialX","initialY","plotWidth","plotHeight","brushWidth","brushHeight","selectionStyle","lo","hi","bisectRight","bisector","tickStep","step0","step1","initRange","domain","Map","object","each","set","isArray","Set","has","get","remove","property","clear","slice","empty","proto","array","implicit","ordinal","unknown","copy","gamma","nogamma","exponential","rgbGamma","end","colorRgb","spline","rgbBasis","v1","v2","v0","v3","basis","reA","reB","number","am","bm","bs","bi","lastIndex","q","one","zero","join","Date","setTime","nb","na","valueOf","SQRT2","unit","identity","normalize","clamper","bimap","interpolate","d0","d1","r0","r1","polymap","bisect","clamp","continuous","transform","untransform","piecewise","input","interpolateValue","rescale","interpolateNumber","rangeRound","interpolateRound","u","transformer","toExponential","coefficient","formatDecimal","prefixExponent","re","formatSpecifier","specifier","FormatSpecifier","match","align","comma","precision","exponent","%","toFixed","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","substring","currency","decimal","numerals","replace","formatNumerals","percent","newFormat","formatTypes","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","charCodeAt","precisionPrefix","precisionRound","precisionFixed","linearish","tickFormat","nice","formatLocale","newInterval","floori","offseti","field","interval","date","offset","previous","every","millisecond","durationMinute","durationWeek","second","getMilliseconds","getUTCSeconds","day","getSeconds","getMinutes","getHours","setHours","setDate","getDate","getTimezoneOffset","weekday","getDay","sunday","monday","thursday","year","setMonth","getMonth","getFullYear","setFullYear","utcMinute","setUTCSeconds","getUTCMinutes","utcHour","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcYear","setUTCFullYear","localDate","H","M","S","L","utcDate","UTC","newYear","utcFormat","utcParse","pads","-","0","numberRe","percentRe","requoteRe","pad","string","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","formatWeekNumberISO","timeThursday","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatFullYear","formatZone","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","I","Y","utcFormats","parses","parseSpecifier","charAt","newParse","newDate","week","parse","toISOString","durationSecond","durationHour","durationDay","durationMonth","durationYear","calendar","month","hour","minute","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","tickIntervals","tickInterval","utcWeek","utcSecond","utcMillisecond","sequential","k10","interpolator","getFillScale","fillCol","fillSet","from","getColorScale","scaleRange","interpolator_1","interpolateRgbBasis","scaleOrdinal","getGroupKey","tslib_1.__spread","sort","appendGroupingCol","groupingColKeys","columnKey","groupKeysData","reduce","addColumn","getLineTable","getLineMappings","getLineScales","getSymbolScale","symbolCol","uniqueValues","getScatterTable","withFillCol","getScatterMappings","getScatterScales","SimpleTable","columnType","isWideningTimeType","newTable","getHeatmapTable","xDomain","yDomain","bin2d","getHeatmapScales","scaleSequential","getHeatmapMappings","xColType","yColType","__","xBinWidth","yBinWidth","val","domainWidth","percentage","binIndex","getHistogramTable","bin","getHistogramMappings","getHistogramScales","LN2","resolveXDomain","createBins","groupsByGroupKey","getGroup","xPercentage","bin_1","groupKeys","groupKeyData","bin_2","sum","bins_1","binTable","name_1","binWidth","binMinimums","preferredXDomain","groupColKeys_1","getTimeFormatter","dateFormatter","getDateTickFormatter","FORMATTERS","String","leftPad","repeat","getTicks","orientation","charMetrics","sampleTick","charLength","numTicks","getNumTicks","getTimeTicks","sampleTickWidth","scaleUtc","getTime","assert","condition","errorMessage","getTextMetrics","text","div","span","innerText","metrics","getMargins","longestYTick","maxX","maxDistance","xs_2","maxBy","maxTextWidth","textHeight","enumeratePaths","pathToTarget","currentPath","getByPath","currentTarget","setByPath","nextTarget","isArrayKey","isEqual","aKeys","bKeys","simpleIsEqual","newArgs","lastArgs","newArg","newValue","oldValue","resultFn","lastThis","lastResult","calledOnce","MemoizedFunctionCache","memoizedFunctions","memoized","memoizeOne","original","formatSmallNumber","formatLargeNumber","defaultNumberFormatter","getLinearScale","scaleLinear","X_DOMAIN_AESTHETICS","Y_DOMAIN_AESTHETICS","DEFAULT_X_DOMAIN","DEFAULT_Y_DOMAIN","DEFAULT_FORMATTER","colKey","preferredFormatter","getColumnTypeByKey","timeFormatter","transformKey","fns","transforms.getLineTable","transforms.getScatterTable","transforms.getHistogramTable","transforms.getHeatmapTable","aesthetic","layerType","transforms.getLineScales","getter","transforms.getScatterScales","transforms.getHistogramScales","transforms.getHeatmapScales","transforms.getLineMappings","transforms.getScatterMappings","transforms.getHeatmapMappings","transforms.getHistogramMappings","isXControlled","onResetXDomain","_xDomain","getXDomain","isYControlled","onResetYDomain","_yDomain","getYDomain","PlotEnv","_config","prevConfig","mergeConfigs","areUncontrolledDomainsStale","getMarginsMemoized","getTicksMemoized","getColumnTypeForAesthetics","getXScaleMemoized","rangePadding","getYScaleMemoized","newXDomain","onSetXDomain","newYDomain","onSetYDomain","colKeys","getColumnKeysForAesthetics","getTextMetricsMemoized","getTimeFormatterMemoized","getDomainForAesthetics","aesthetics","columnTypes","aes","getMapping","derivedMapping","fnKey","columnKeys","specifiedLineWidths","wrappedSource","root","wrappedTarget","paths","paths_1","sourceValue","targetValue","identityMerge","usePlotEnv","envRef","effect","inputs","isFirstRender","envRevision","setEnvRevision","SizedPlot","plotStyle","userSelect","innerPlotStyle","fullsizeStyle","forceUpdate","useReducer","innerPlotRef","hoverEvent","hoverProps","dragEvent","dragJustEnded","dispatch","onMouseDown","onMouseUp","useDragEvent","handleXBrushEnd","useCallback","xRange","handleYBrushEnd","yRange","handleResetDomains","resetDomains","onDoubleClick","EOL","EOF","QUOTE","NEWLINE","RETURN","objectConverter","Function","JSON","stringify","inferColumns","columnSet","row","formatDate","hours","minutes","seconds","milliseconds","delimiter","reFormat","DELIMITER","parseRows","N","eof","eol","token","preformatBody","formatValue","formatRow","convert","customConverter","formatBody","formatRows","csv","dsv","csvParse","csvParseRows","splitChunks","fluxCSV","trimmedResponse","extractAnnotationText","chunk","startsWith","parseAnnotations","annotationData","headerRow","groupRow","find","datatypeRow","defaultRow","datatypeByColumnName","defaultByColumnName","extractTableText","TO_COLUMN_TYPE","boolean","unsignedLong","long","double","dateTime:RFC3339","toColumnType","fluxDataType","parseValue","Number","resolveNames","fluxGroupKeyUnion","colNameCounts","col","uniqueColNames","uniqueName","delete","uniqueColNames_1","chunks","tableLength","chunks_1","tableText","tableData","annotationText","columnName","columnDefault"],"mappings":"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"}